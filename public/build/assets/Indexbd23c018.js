import{k as y,K as _,G as b,I as O,J as L,o as W,m as x,n as h,p,u as w,w as f,Z as X,s as e,t as P,v as s,M as Y,N as ee,x as j,y as V}from"./vendorb2c7101c.js";import{_ as re}from"./AuthenticatedLayout4b68b4d2.js";import{P as ae}from"./Pagination5e7b6b0b.js";import{Q as te,Z as T}from"./flowbite-vue4519d4b7.js";import{_ as oe}from"./InputLabel949fdd54.js";import{_ as m}from"./TextInput70c275a9.js";const se={class:"ml-4 col-span-full"},le={class:"p-4 mb-4 bg-white col-span-12 border border-gray-200 rounded-lg shadow-sm 2xl:col-span-12 dark:border-gray-700 sm:p-4 dark:bg-gray-800"},de={class:"overflow-x-auto"},ce={class:"col-span-full flex justify-between items-center"},ne={class:"text-xl font-semibold text-gray-900 sm:text-2xl dark:text-white"},ie={class:"grid grid-cols-1 p-4 xl:grid-cols-12 md:grid-span-12 xl:gap-4 dark:bg-gray-900 z-20"},ge={class:"p-2 col-span-3"},pe={class:"p-2 col-span-3"},ue={class:"w-full"},be=e("h3",{class:"text-base font-bold text-gray-900 dark:text-white"},"Total venta ",-1),ye={class:"text-2xl font-bold leading-none text-gray-900 sm:text-3xl dark:text-white"},xe={class:"p-2 col-span-3"},he={class:"w-full"},ve=e("h3",{class:"text-base font-bold text-gray-900 dark:text-white"},"Total venta con Efectivo",-1),_e={class:"text-2xl font-bold leading-none text-gray-900 sm:text-3xl dark:text-white"},we={class:"p-2 col-span-3"},fe={class:"w-full"},ke=e("h3",{class:"text-base font-bold text-gray-900 dark:text-white"},"Total venta con tarjetas",-1),me={class:"text-2xl font-bold leading-none text-gray-900 sm:text-3xl dark:text-white"},Ce={class:"grid grid-cols-1 p-4 xl:grid-cols-12 md:grid-span-12 xl:gap-4 dark:bg-gray-900 z-20"},Fe={class:"p-2 col-span-3"},Le={class:"mt-1"},Pe={class:"rounded bg-white border border-gray-300 px-1 py-1 space-y-1 absolute z-10"},je=["onClick"],Ve={class:"p-2 col-span-3"},Te={class:"mt-1"},Ie={class:"p-2 col-span-3"},Re={class:"mt-1"},De={class:"inline-block min-w-full align-middle"},Ne={class:"overflow-visible"},Ee={class:"w-full text-sm text-left text-gray-600 dark:text-gray-400"},Me=e("thead",{class:"text-md text-gray-700 bg-gray-200/80 border-2 border-gray-300 dark:border-gray-700 dark:bg-gray-700 dark:text-gray-400"},[e("tr",null,[e("th",{scope:"col",class:"p-1 text-center border-2 border-gray-300 dark:border-gray-500"}," ID "),e("th",{scope:"col",class:"p-1 text-center border-2 border-gray-300 dark:border-gray-500"}," Ticket "),e("th",{scope:"col",class:"p-1 text-center border-2 border-gray-300 dark:border-gray-500"}," Vendedor "),e("th",{scope:"col",class:"p-1 text-center border-2 border-gray-300 dark:border-gray-500"}," Neto "),e("th",{scope:"col",class:"p-1 text-center border-2 border-gray-300 dark:border-gray-500"}," Descuento "),e("th",{scope:"col",class:"p-1 text-center border-2 border-gray-300 dark:border-gray-500"}," Total "),e("th",{scope:"col",class:"p-1 text-center border-2 border-gray-300 dark:border-gray-500"}," Métodos Pagos "),e("th",{scope:"col",class:"p-1 text-center border-2 border-gray-300 dark:border-gray-500"}," Efectivo "),e("th",{scope:"col",class:"p-1 text-center border-2 border-gray-300 dark:border-gray-500"}," Tarjetas "),e("th",{scope:"col",class:"p-1 text-center border-2 border-gray-300 dark:border-gray-500"}," Cambio "),e("th",{scope:"col",class:"p-1 text-center border-2 border-gray-300 dark:border-gray-500"}," Tipo venta "),e("th",{scope:"col",class:"p-1 text-center border-2 border-gray-300 dark:border-gray-500"}," Forma entrega "),e("th",{scope:"col",class:"p-1 text-center border-2 border-gray-300 dark:border-gray-500"}," Fecha "),e("th",{scope:"col",class:"p-1 text-center border-2 border-gray-300 dark:border-gray-500"}," Código Ruta "),e("th",{scope:"col",class:"p-1 text-center border-2 border-gray-300 dark:border-gray-500"}," Repartidor ")])],-1),ze={scope:"row",class:"px-3 py-1 border-2 text-center border-gray-300 dark:border-gray-700 font-medium text-gray-900 whitespace-nowrap dark:text-white"},Be={scope:"row",class:"px-3 py-1 border-2 border-gray-300 dark:border-gray-700 font-normal text-gray-900 whitespace-nowrap dark:text-white"},Se={scope:"row",class:"px-3 py-1 border-2 border-gray-300 dark:border-gray-700 font-normal text-gray-900 whitespace-nowrap dark:text-white"},Ue={scope:"row",class:"px-3 py-1 border-2 text-end border-gray-300 dark:border-gray-700 font-normal text-gray-900 whitespace-nowrap dark:text-white"},Ze={scope:"row",class:"px-3 py-1 border-2 text-end border-gray-300 dark:border-gray-700 font-normal text-gray-900 whitespace-nowrap dark:text-white"},$e={scope:"row",class:"px-3 py-1 border-2 text-end border-gray-300 dark:border-gray-700 font-normal text-gray-900 whitespace-nowrap dark:text-white"},Qe={scope:"row",class:"px-3 py-1 border-2 border-gray-300 dark:border-gray-700 font-normal text-gray-900 whitespace-nowrap dark:text-white"},Ae={scope:"row",class:"px-3 py-1 border-2 text-end border-gray-300 dark:border-gray-700 font-normal text-gray-900 whitespace-nowrap dark:text-white"},Ge={scope:"row",class:"px-3 py-1 border-2 text-end border-gray-300 dark:border-gray-700 font-normal text-gray-900 whitespace-nowrap dark:text-white"},He={scope:"row",class:"px-3 py-1 border-2 text-end border-gray-300 dark:border-gray-700 font-normal text-gray-900 whitespace-nowrap dark:text-white"},Je={scope:"row",class:"px-3 py-1 border-2 text-center border-gray-300 dark:border-gray-700 font-normal text-gray-900 whitespace-nowrap dark:text-white"},Ke={scope:"row",class:"px-3 py-1 border-2 text-center border-gray-300 dark:border-gray-700 font-normal text-gray-900 whitespace-nowrap dark:text-white"},qe={scope:"row",class:"px-3 py-1 border-2 text-end border-gray-300 dark:border-gray-700 font-normal text-gray-900 whitespace-nowrap dark:text-white"},Oe={scope:"row",class:"px-3 py-1 border-2 text-end border-gray-300 dark:border-gray-700 font-normal text-gray-900 whitespace-nowrap dark:text-white"},We={scope:"row",class:"px-3 py-1 border-2 text-end border-gray-300 dark:border-gray-700 font-normal text-gray-900 whitespace-nowrap dark:text-white"},lr={__name:"Index",setup(Xe){const u=y({}),l=y(""),d=y(""),c=y(""),v=y(!1),{lista_fechas:I}=_().props,{hoy:R}=_().props,D=b(()=>{if(l.value==="")return v.value=!1,[];v.value=!0;let a=0;return I.filter(r=>{if(r.name.toLowerCase().includes(l.value.toLowerCase())&&a<10)return a++,r})}),N=(a,r,t)=>{v.value=!1,l.value=a},g=b(()=>{let a=_().props.cortecaja;return console.log(l.value),console.log(d.value),console.log(c.value),l.value!==""&&d.value==""&&c.value==""&&(console.log("Filtro solo por fecha"),n.currentPage=1,a=u.value.filter(r=>r.fecha.toLowerCase().includes(l.value.toLowerCase()))),l.value==""&&d.value!==""&&c.value==""&&(console.log("Filtro solo por ruta"),n.currentPage=1,a=u.value.filter(r=>r.codigo_ruta.toLowerCase().includes(d.value.toLowerCase()))),l.value==""&&d.value==""&&c.value!==""&&(console.log("Filtro solo por repartidor"),n.currentPage=1,a=u.value.filter(r=>r.repartidor.toLowerCase().includes(c.value.toLowerCase()))),l.value!==""&&d.value!==""&&c.value==""&&(console.log("Filtro solo por fecha y ruta"),n.currentPage=1,a=u.value.filter(r=>r.fecha.toLowerCase().includes(l.value.toLowerCase())&&r.codigo_ruta.toLowerCase().includes(d.value.toLowerCase()))),l.value!==""&&d.value==""&&c.value!==""&&(console.log("Filtro solo por fecha y repartidor"),n.currentPage=1,a=u.value.filter(r=>r.fecha.toLowerCase().includes(l.value.toLowerCase())&&r.repartidor.toLowerCase().includes(c.value.toLowerCase()))),l.value==""&&d.value!==""&&c.value!==""&&(console.log("Filtro solo por repartidor y ruta"),n.currentPage=1,a=u.value.filter(r=>r.codigo_ruta.toLowerCase().includes(d.value.toLowerCase())&&r.repartidor.toLowerCase().includes(c.value.toLowerCase()))),l.value!==""&&d.value!==""&&c.value!==""&&(console.log("Filtro solo por fecha, repartidor y ruta"),n.currentPage=1,a=u.value.filter(r=>r.fecha.toLowerCase().includes(l.value.toLowerCase())&&r.codigo_ruta.toLowerCase().includes(d.value.toLowerCase())&&r.repartidor.toLowerCase().includes(c.value.toLowerCase()))),a}),C=b(()=>{var a=parseFloat(g.value.reduce((o,i)=>o+parseFloat(i.monto_tarjeta),0)),r=parseFloat(g.value.reduce((o,i)=>o+parseFloat(i.monto_efectivo),0)),t=parseFloat(g.value.reduce((o,i)=>o+parseFloat(i.saldo<0?parseFloat(i.saldo)*-1:0),0));return t-=parseFloat(g.value.reduce((o,i)=>o+parseFloat(parseInt(i.metodo_pago_id)==3&&parseFloat(i.saldo)<0?i.monto_tarjeta:0),0)),(parseFloat(a-t)+parseFloat(r)).toFixed(2)}),E=b(()=>{var a=parseFloat(g.value.reduce((t,o)=>t+parseFloat(o.monto_efectivo),0)),r=parseFloat(g.value.reduce((t,o)=>t+parseFloat(o.saldo<0?parseFloat(o.saldo)*-1:0),0));return r-=parseFloat(g.value.reduce((t,o)=>t+parseFloat(parseInt(o.metodo_pago_id)==3&&parseFloat(o.saldo)<0?o.monto_tarjeta:0),0)),(a-r).toFixed(2)}),M=b(()=>g.value.reduce((a,r)=>a+parseFloat(r.monto_tarjeta),0).toFixed(2)),n=O({currentPage:1,perPage:10,totalPages:b(()=>Math.ceil(g.value.length/n.perPage))});L(()=>n.totalPages,()=>n.currentPage=1),L([C],(a,r)=>{});const z=b(()=>{const{currentPage:a,perPage:r}=n,t=(a-1)*r,o=t+r;return g.value.slice(t,o)}),B=a=>{n.currentPage=a};return W(()=>{u.value=_().props.cortecaja,l.value=R}),(a,r)=>(x(),h("div",null,[p(w(X),{title:"Caja"}),p(re,null,{default:f(()=>[e("div",se,[p(w(te),null,{default:f(()=>[p(w(T),{href:"/",home:""},{default:f(()=>[P(" Inicio ")]),_:1}),p(w(T),null,{default:f(()=>[P(" Caja ")]),_:1})]),_:1})]),e("div",le,[e("div",de,[e("div",ce,[e("h1",ne,"Caja - Total del corte de: "+s(l.value),1)]),e("div",ie,[e("div",ge,[p(oe,{for:"search",value:"Desglose general",class:"block text-base font-bold leading-6 mb-0 text-gray-900 dark:text-white"})]),e("div",pe,[e("div",ue,[be,e("span",ye,s(C.value),1)])]),e("div",xe,[e("div",he,[ve,e("span",_e,s(E.value),1)])]),e("div",we,[e("div",fe,[ke,e("span",me,s(M.value),1)])])]),e("div",Ce,[e("div",Fe,[e("div",Le,[p(m,{id:"search",type:"text",modelValue:l.value,"onUpdate:modelValue":r[0]||(r[0]=t=>l.value=t),autocomplete:"search",class:"block w-full text-gray-900 border border-gray-300 rounded bg-gray-50 sm:text-base focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Ingrese la fecha"},null,8,["modelValue"]),Y(e("ul",Pe,[(x(!0),h(j,null,V(D.value,t=>(x(),h("li",{key:t.name,onClick:o=>N(t.name,!1,o),class:"cursor-pointer hover:bg-gray-100 p-1"},s(t.name),9,je))),128))],512),[[ee,v.value]])])]),e("div",Ve,[e("div",Te,[p(m,{id:"searchRuta",type:"text",modelValue:d.value,"onUpdate:modelValue":r[1]||(r[1]=t=>d.value=t),autocomplete:"search",class:"block w-full text-gray-900 border border-gray-300 rounded bg-gray-50 sm:text-base focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Ingrese la ruta"},null,8,["modelValue"])])]),e("div",Ie,[e("div",Re,[p(m,{id:"searchRepartidor",type:"text",modelValue:c.value,"onUpdate:modelValue":r[2]||(r[2]=t=>c.value=t),autocomplete:"search",class:"block w-full text-gray-900 border border-gray-300 rounded bg-gray-50 sm:text-base focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Ingrese el repartidor"},null,8,["modelValue"])])])]),e("div",De,[e("div",Ne,[e("table",Ee,[Me,e("tbody",null,[(x(!0),h(j,null,V(z.value,({id:t,codigo:o,vendedor:i,neto:S,monto_efectivo:U,forma_entrega:Z,descuento:$,monto_tarjeta:F,saldo:k,total:Q,metodo_pago:A,metodo_pago_id:G,tipo_pago:H,fecha:J,codigo_ruta:K,repartidor:q},Ye)=>(x(),h("tr",{key:t,class:"bg-white border-b dark:bg-gray-800 dark:border-gray-700"},[e("td",ze,s(t),1),e("td",Be,s(o),1),e("td",Se,s(i),1),e("td",Ue,s(S),1),e("td",Ze,s($),1),e("td",$e,s(Q),1),e("td",Qe,s(A),1),e("td",Ae,s(U),1),e("td",Ge,s(F),1),e("td",He,s(k<0?G==3?k*-1-F:k*-1:0),1),e("td",Je,s(H),1),e("td",Ke,s(Z),1),e("td",qe,s(J),1),e("td",Oe,s(K),1),e("td",We,s(q),1)]))),128))])]),p(ae,{pageCount:n.totalPages,class:"my-3",containerClass:"flex items-center -space-x-px h-10 text-base",prevLinkClass:"flex items-center  cursor-pointer justify-center px-2  h-10 ml-0 leading-tight text-gray-500  border border-gray-300 rounded-l-lg hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white",nextLinkClass:"flex items-center cursor-pointer justify-center px-2 h-10 leading-tight text-gray-500  border border-gray-300 rounded-r-lg hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white",pageLinkClass:"flex items-center hover:cursor-pointer justify-center px-5 h-10 leading-tight text-gray-500  border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white",prevText:"«  Anterior",nextText:"Siguiente  »",disabledClass:"bg-gray-100 cursor-not-allowed",activeClass:"bg-gray-200 cursor-pointer",clickHandler:B},null,8,["pageCount"])])])])])]),_:1})]))}};export{lr as default};
