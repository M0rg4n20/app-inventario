import{G as le,m as y,n as p,H as ce,C as ne,K as w,k as c,T as H,o as ie,J as be,p as d,u as l,w as f,q as Q,Z as ye,s as e,t as j,v as r,M as N,al as pe,B as ge,x as Z,y as z,N as q}from"./vendorb2c7101c.js";import{_ as ue,h as G}from"./AuthenticatedLayout4b68b4d2.js";import{Q as _e,Z as J}from"./flowbite-vue4519d4b7.js";import"./sweetalert2.all5300f0ca.js";import{D as I,l as fe}from"./es-ESeb942a1a.js";import"./es.es28b7c52d.js";import K from"./EditarModalbc3c2bcf.js";import{_ as L}from"./TextInput70c275a9.js";import{s as me}from"./multiselect2742171c.js";import{S as W}from"./sortable.esm0d19b1d3.js";import"./InputErrorb5789600.js";import"./InputLabel949fdd54.js";import"./Modal5c7d7f4d.js";import"./PrimaryButton2bb40203.js";const X={__name:"StatusColor",props:{texto:{type:String}},setup(F){const g=F,h=le(()=>{if(g.texto=="Asignado")return"bg-yellow-300";if(g.texto=="Cancelado")return"bg-red-600";if(g.texto=="Entregado")return"bg-green-600"});return(x,b)=>(y(),p("div",{class:ne(h.value+" p-0 flex m-0 justify-center items-center text-xs text-white font-semibold h-5 rounded  mx-auto")},[ce(x.$slots,"default")],2))}};const he={class:"ml-4 col-span-full"},xe=e("div",{class:"mt-4 flex"},[e("div",{class:"w-1/4 pr-2"},[e("label",null,"Mostrar todos")])],-1),ke={class:"mt-4 flex"},ve={class:"w-1/4 pr-2"},we={class:"p-4 mb-4 bg-white col-span-12 pb-5 rounded-lg shadow-sm 2xl:col-span-12 dark:border-gray-700 sm:p-4 dark:bg-gray-800"},je={class:"overflow-x-auto"},Ie={class:"lg:inline-block min-w-full mt-4"},Ce={class:"overflow-auto"},Ee={key:0,class:"mt-4 flex"},Be={class:"w-1/4 pr-2"},De={class:"w-1/4 pr-2"},Ve={class:"w-1/4 pr-2"},Te={id:"tabla1",class:"pt-3 w-full text-sm text-center text-gray-600 dark:text-gray-400"},Se=e("thead",{class:"text-md text-center text-gray-700 bg-gray-200/80 dark:bg-gray-700 dark:text-gray-400"},[e("tr",null,[e("th",{scope:"col",class:"border border-gray-300 dark:border-gray-500",title:"Prioridad"},[e("div",{class:"flex justify-center"})]),e("th",{scope:"col",class:"border border-gray-300 dark:border-gray-500"},[e("div",{class:"flex justify-center"}," ID ")]),e("th",{scope:"col",class:"border border-gray-300 dark:border-gray-500"},[e("div",{class:"flex justify-center text-center"}," Cliente ")]),e("th",{scope:"col",class:"border border-gray-300 dark:border-gray-500"},[e("div",{class:"flex justify-center"}," Pedido ")]),e("th",{scope:"col",class:"border border-gray-300 dark:border-gray-500"},[e("div",{class:"flex justify-center"}," Calle ")]),e("th",{scope:"col",class:"border border-gray-300 dark:border-gray-500"},[e("div",{class:"flex justify-center"}," Colonia ")]),e("th",{scope:"col",class:"border border-gray-300 dark:border-gray-500"},[e("div",{class:"flex justify-center"}," Teléfono ")]),e("th",{scope:"col",class:"border border-gray-300 dark:border-gray-500"},[e("div",{class:"flex justify-center"}," Ruta ")]),e("th",{scope:"col",class:"border border-gray-300 dark:border-gray-500"},[e("div",{class:"flex justify-center"}," Repartidor ")]),e("th",{scope:"col",class:"border border-gray-300 dark:border-gray-500"},[e("div",{class:"flex justify-center"}," Estado ")]),e("th",{scope:"col",class:"border border-gray-300 dark:border-gray-500"},[e("div",{class:"flex justify-center"}," Comentario ")]),e("th",{scope:"col",class:"border border-gray-300 dark:border-gray-500"},[e("div",{class:"flex justify-center"}," Fecha ")]),e("th",{scope:"col",class:"border border-gray-300 dark:border-gray-500"},[e("div",{class:"flex justify-center"}," Hora ")]),e("th",{scope:"col",class:"border border-gray-300 dark:border-gray-500"},[e("div",{class:"flex justify-center"}," Acciones ")])])],-1),Me={scope:"row",class:"p-1 border dark:bg-gray-800 dark:border-gray-700 font-medium text-gray-900 dark:text-white"},Re={title:"Prioridad"},Pe={scope:"row",class:"p-1 border dark:bg-gray-800 dark:border-gray-700 font-medium text-gray-900 dark:text-white"},Ye={scope:"row",class:"p-1 border dark:bg-gray-800 dark:border-gray-700 font-medium text-gray-900 dark:text-white"},$e={scope:"row",class:"p-1 border text-start dark:border-gray-700"},Ne={scope:"row",class:"p-1 border dark:border-gray-700"},Ae={scope:"row",class:"p-1 border dark:border-gray-700"},Fe={scope:"row",class:"p-1 border dark:border-gray-700"},Oe={scope:"row",class:"p-1 border dark:border-gray-700"},Ue={scope:"row",class:"p-1 border dark:border-gray-700"},He={scope:"row",class:"p-1 border dark:border-gray-700"},Qe={scope:"row",class:"p-1 border dark:border-gray-700"},Ze={scope:"row",class:"p-1 border dark:border-gray-700"},ze={scope:"row",class:"p-1 border dark:border-gray-700"},qe={scope:"row",class:"p-1 border mx-auto dark:border-gray-700"},Ge={style:{display:"none"},id:"tabla2",class:"pt-3 w-full text-sm text-center text-gray-600 dark:text-gray-400"},Je=e("thead",{class:"text-md text-center text-gray-700 bg-gray-200/80 dark:bg-gray-700 dark:text-gray-400"},[e("tr",null,[e("th",{scope:"col",class:"border border-gray-300 dark:border-gray-500",title:"Prioridad"},[e("div",{class:"flex justify-center"})]),e("th",{scope:"col",class:"border border-gray-300 dark:border-gray-500"},[e("div",{class:"flex justify-center"}," ID ")]),e("th",{scope:"col",class:"border border-gray-300 dark:border-gray-500"},[e("div",{class:"flex justify-center text-center"}," Cliente ")]),e("th",{scope:"col",class:"border border-gray-300 dark:border-gray-500"},[e("div",{class:"flex justify-center"}," Pedido ")]),e("th",{scope:"col",class:"border border-gray-300 dark:border-gray-500"},[e("div",{class:"flex justify-center"}," Calle ")]),e("th",{scope:"col",class:"border border-gray-300 dark:border-gray-500"},[e("div",{class:"flex justify-center"}," Colonia ")]),e("th",{scope:"col",class:"border border-gray-300 dark:border-gray-500"},[e("div",{class:"flex justify-center"}," Teléfono ")]),e("th",{scope:"col",class:"border border-gray-300 dark:border-gray-500"},[e("div",{class:"flex justify-center"}," Ruta ")]),e("th",{scope:"col",class:"border border-gray-300 dark:border-gray-500"},[e("div",{class:"flex justify-center"}," Repartidor ")]),e("th",{scope:"col",class:"border border-gray-300 dark:border-gray-500"},[e("div",{class:"flex justify-center"}," Estado ")]),e("th",{scope:"col",class:"border border-gray-300 dark:border-gray-500"},[e("div",{class:"flex justify-center"}," Comentario ")]),e("th",{scope:"col",class:"border border-gray-300 dark:border-gray-500"},[e("div",{class:"flex justify-center"}," Fecha ")]),e("th",{scope:"col",class:"border border-gray-300 dark:border-gray-500"},[e("div",{class:"flex justify-center"}," Hora ")]),e("th",{scope:"col",class:"border border-gray-300 dark:border-gray-500"},[e("div",{class:"flex justify-center"}," Acciones ")])])],-1),Ke={scope:"row",class:"p-1 border dark:bg-gray-800 dark:border-gray-700 font-medium text-gray-900 dark:text-white"},Le={title:"Prioridad"},We={scope:"row",class:"p-1 border dark:bg-gray-800 dark:border-gray-700 font-medium text-gray-900 dark:text-white"},Xe={scope:"row",class:"p-1 border dark:bg-gray-800 dark:border-gray-700 font-medium text-gray-900 dark:text-white"},er={scope:"row",class:"p-1 border text-start dark:border-gray-700"},rr={scope:"row",class:"p-1 border dark:border-gray-700"},or={scope:"row",class:"p-1 border dark:border-gray-700"},tr={scope:"row",class:"p-1 border dark:border-gray-700"},ar={scope:"row",class:"p-1 border dark:border-gray-700"},sr={scope:"row",class:"p-1 border dark:border-gray-700"},dr={scope:"row",class:"p-1 border dark:border-gray-700"},lr={scope:"row",class:"p-1 border dark:border-gray-700"},cr={scope:"row",class:"p-1 border dark:border-gray-700"},nr={scope:"row",class:"p-1 border dark:border-gray-700"},ir={scope:"row",class:"p-1 border mx-auto dark:border-gray-700"},A="Envios",Ir={__name:"Index",setup(F){I.use(I),w().props;const g=c(null),h=c(null),{permissions:x}=w().props.auth,b=c([]),C=c([]),ee=c(null);c([new Date,new Date]);var E=new Date,re=E.getDate()+"/"+(E.getMonth()+1)+"/"+E.getFullYear();const oe=c({value:"",placeholder:"Seleccione",options:[{value:"Asignado",label:"Asignado"},{value:"Entregado",label:"Entregado"},{value:"Cancelado",label:"Cancelado"},{value:"Reprogramado",label:"Reprogramado"}]}),k=H({ver_todos:!1,fecha:re}),O={responsive:!0,language:fe,order:[0,"asc"]},v=c(""),B=c(""),D=c(""),te=()=>{Q(()=>{ee.value=new I("#tabla1",O)})},V=()=>{Q(()=>{V.value=new I("#tabla2",O),document.getElementById("tabla2_info").style.display="none",document.getElementById("tabla2_length").style.display="none",document.getElementById("tabla2_paginate").style.display="none"})};setTimeout(()=>{route().current("envios.index")&&window.open(self.location,"_self")},6e4),ie(()=>{C.value=w().props.pedidos,b.value=w().props.pedidosNow,te(),V(),new W(g.value,{animation:150,onEnd:s=>{const t=s.oldIndex,o=s.newIndex,a=b.value;a.splice(o,0,a.splice(t,1)[0]),b.value=a,U()},ghostClass:"dragged-row",chosenClass:"dragged-row"}),new W(h.value,{animation:150,onEnd:s=>{const t=s.oldIndex,o=s.newIndex,a=C.value;a.splice(o,0,a.splice(t,1)[0]),b.value=a,U(),console.log("ENTRO onMounted 2")},ghostClass:"dragged-row",chosenClass:"dragged-row"})});const T=()=>{const s=`${v.value||""} ${B.value||""} ${D.value||""}`;V.value.search(s).draw()},U=()=>{const s=b.value.map((t,o)=>({id:t.id,order:o+1}));axios.post(route("envios.save-order"),{order:s}).then(t=>{console.log("Orden guardado exitosamente")}).catch(t=>{console.error("Error al guardar el orden: ",t)})};H({id:""}),be(v,()=>{T()});const ae=()=>{var s=document.getElementById("tabla1"),t=document.getElementById("tabla2"),o=document.getElementById("tabla1_info"),a=document.getElementById("tabla2_info"),n=document.getElementById("tabla1_length"),u=document.getElementById("tabla2_length"),i=document.getElementById("tabla1_paginate"),_=document.getElementById("tabla2_paginate");k.ver_todos?(s.style.display="none",o.style.display="none",n.style.display="none",i.style.display="none",t.style.display="block",a.style.display="block",u.style.display="block",_.style.display="block"):(s.style.display="block",o.style.display="block",n.style.display="block",i.style.display="block",t.style.display="none",a.style.display="none",u.style.display="none",_.style.display="none")};return(s,t)=>(y(),p("div",null,[d(l(ye),{title:A}),d(ue,null,{default:f(()=>[e("div",he,[d(l(_e),null,{default:f(()=>[d(l(J),{href:"/",home:""},{default:f(()=>[j(" Inicio ")]),_:1}),d(l(J),null,{default:f(()=>[j(r(A))]),_:1})]),_:1})]),e("div",{class:"px-5 col-span-full flex justify-between items-center"},[e("h1",{class:"text-xl font-semibold text-gray-900 sm:text-2xl dark:text-white"},r(A))]),xe,e("div",ke,[e("div",ve,[N(e("input",{type:"checkbox",value:"","onUpdate:modelValue":t[0]||(t[0]=o=>l(k).ver_todos=o),onChange:t[1]||(t[1]=o=>ae())},null,544),[[pe,l(k).ver_todos]])])]),e("div",we,[e("div",je,[e("div",Ie,[e("div",Ce,[l(k).ver_todos?(y(),p("div",Ee,[e("div",Be,[d(L,{id:"search",type:"search",modelValue:D.value,"onUpdate:modelValue":t[2]||(t[2]=o=>D.value=o),onInput:T,autocomplete:"search",class:"block w-full text-gray-900 border border-gray-300 rounded bg-gray-50 sm:text-base focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Ingrese la fecha"},null,8,["modelValue"])]),e("div",De,[d(l(me),{modelValue:v.value,"onUpdate:modelValue":t[3]||(t[3]=o=>v.value=o),options:oe.value.options,placeholder:"Seleccione el estado"},null,8,["modelValue","options"])]),e("div",Ve,[d(L,{id:"buscarPorRepartidor",type:"search",modelValue:B.value,"onUpdate:modelValue":t[4]||(t[4]=o=>B.value=o),onInput:T,placeholder:"Repartidor"},null,8,["modelValue"])])])):ge("",!0),e("table",Te,[Se,e("tbody",{ref_key:"sortableTable",ref:g,class:"sortable"},[(y(!0),p(Z,null,z(b.value,({id:o,telefono:a,venta:n,colonia:u,estado:i,ruta:_,direccion:S,fecha:M,hora:R,orden:P,comentario:Y,repartidor:$,created_at:se},de)=>(y(),p("tr",{key:o,class:"bg-white text-center dark:bg-gray-800 dark:border-gray-700"},[e("th",Me,[e("span",Re,r(P),1)]),e("th",Pe,r(o),1),e("th",Ye,r(n.cliente.nombre),1),e("td",$e,r(n.detalles_ventas.map(m=>"Cantidad: "+m.cantidad+" -- Producto: "+m.producto.nombre).join(" | ")),1),e("td",Ne,r(S),1),e("td",Ae,r(u),1),e("td",Fe,r(a),1),e("td",Oe,r(_.nombre),1),e("td",Ue,r($.name),1),e("td",He,[d(X,{texto:i},{default:f(()=>[j(r(i),1)]),_:2},1032,["texto"])]),e("td",Qe,r(Y),1),e("td",Ze,r(l(G)(String(M)).format("DD/MM/YYYY")),1),e("td",ze,r(R),1),e("td",qe,[N(d(K,{"cliente-id":o},null,8,["cliente-id"]),[[q,l(x).includes("editar-envios")]])])]))),128))],512)]),e("table",Ge,[Je,e("tbody",{ref_key:"sortableTable2",ref:h,class:"sortable2"},[(y(!0),p(Z,null,z(C.value,({id:o,telefono:a,venta:n,colonia:u,estado:i,ruta:_,direccion:S,fecha:M,hora:R,orden:P,comentario:Y,repartidor:$,created_at:se},de)=>(y(),p("tr",{key:o,class:"bg-white text-center dark:bg-gray-800 dark:border-gray-700"},[e("th",Ke,[e("span",Le,r(P),1)]),e("th",We,r(o),1),e("th",Xe,r(n.cliente.nombre),1),e("td",er,r(n.detalles_ventas.map(m=>"Cantidad: "+m.cantidad+" -- Producto: "+m.producto.nombre).join(" | ")),1),e("td",rr,r(S),1),e("td",or,r(u),1),e("td",tr,r(a),1),e("td",ar,r(_.nombre),1),e("td",sr,r($.name),1),e("td",dr,[d(X,{texto:i},{default:f(()=>[j(r(i),1)]),_:2},1032,["texto"])]),e("td",lr,r(Y),1),e("td",cr,r(l(G)(String(M)).format("DD/MM/YYYY")),1),e("td",nr,r(R),1),e("td",ir,[N(d(K,{"cliente-id":o},null,8,["cliente-id"]),[[q,l(x).includes("editar-envios")]])])]))),128))],512)])])])])])]),_:1})]))}};export{Ir as default};
