import{k as n,K as A,T as E,m as c,n as u,s as t,p as l,w as f,v,z as $,x as V,y as B,M as D,an as F,u as r,C as N,t as j,a as z,O as T}from"./vendorb2c7101c.js";import{_ as G}from"./InputErrorb5789600.js";import{_ as I}from"./InputLabel949fdd54.js";import{_ as K}from"./Modal5c7d7f4d.js";import{_ as L}from"./PrimaryButton2bb40203.js";import{S as p}from"./sweetalert2.all5300f0ca.js";import"./multiselect2742171c.js";const U={class:"p-2"},W=["onSubmit"],q={class:"px-2 grid grid-cols-6 gap-4 md:gap-3 2xl:gap-6 mb-2"},H={class:"col-span-6 shadow-default xl:col-span-6"},J={class:"grid grid-cols-3 gap-4"},P=["id","value","onChange"],Q=["for"],X={class:"flex justify-end pt-2"},h="Repartidor",m="pedidos",oe={__name:"AsignarRepartidorMultiple",props:{selectedOrders:Array},setup(x){const o=x,i=n(!1),{user:w}=A().props.auth,e=E({id:"",ruta_id:"0",repartidor_id:"",responsable_id:"",selected_orders:"",colonia:"",cantidad_rutas:"",cantidad_disponible:""}),y=n({value:""}),g=n({value:""}),k=()=>{C(o.categoriaId)};n([]);const C=()=>{z.get(route(m+".asignarrm")).then(s=>{i.value=!0;var d=s.data;y.value=o.selectedOrders,g.value=d.repartidores,e.responsable_id=w.id})},_=()=>{i.value=!1,e.reset()},S=s=>{e.cantidad_rutas=s},R=()=>{o.selectedOrders.length>0?(console.log("prueba"),e.selected_orders=o.selectedOrders,e.clearErrors(),e.cantidad_rutas==3?p.fire({icon:"warning",title:"Este repartidor ya tiene 3 rutas asignadas, debe seleccionar otro.",width:350}):(console.log("prueba2"),e.post(route(m+".update-multipleRepartidor"),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{console.log("prueba4"),i.value=!1,M(h+" Asignada"),T.get(route(m+".index")),e.reset()},onFinish:()=>{console.log("prueba5")},onError:()=>{console.log("prueba6")}}))):p.fire({icon:"warning",title:"Seleccione los pedidos antes de continuar",width:350})},M=s=>{e.reset(),p.fire({width:350,title:s,icon:"success"})};return(s,d)=>(c(),u("div",null,[t("button",{type:"button",class:"m-1 p-2 text-sm font-medium rounded text-center text-white bg-green-500 hover:bg-green-600 dark:bg-green-500 dark:hover:bg-green-700",onClick:k},"Asignar Repartidor"),l(K,{show:i.value,onClose:_,maxWidth:"md"},{default:f(()=>[t("div",U,[t("div",{class:"p-4 mb-4 rounded-t flex justify-between items-center border-b border-gray-200 dark:border-gray-600"},[t("h2",{class:"text-lg font-medium text-gray-900"}," Asignar "+v(h))]),t("form",{onSubmit:$(R,["prevent"])},[t("div",q,[t("div",H,[l(I,{value:"Repartidor",class:"block text-base font-medium leading-6 text-gray-900"}),t("div",J,[(c(!0),u(V,null,B(g.value,(a,O)=>(c(),u("div",{key:O,class:"flex items-center space-x-2"},[D(t("input",{type:"radio",id:"repartidor_"+a.value,"onUpdate:modelValue":d[0]||(d[0]=b=>r(e).repartidor_id=b),value:a.value,onChange:b=>S(a.cantidad_rutas)},null,40,P),[[F,r(e).repartidor_id]]),t("label",{for:"repartidor_"+a.value},v(a.label),9,Q)]))),128))]),l(G,{class:"mt-1 text-xs",message:r(e).errors.repartidor_id},null,8,["message"])])]),t("div",X,[t("button",{onClick:_,type:"button",class:"inline-block rounded bg-red-600 p-2 text-sm font-semibold text-white mr-4 mb-1 hover:bg-red-700"}," Cancelar "),l(L,{class:N(["inline-block rounded bg-blue-600 p-2 text-sm font-semibold text-white mr-1 mb-1 hover:bg-blue-700",{"opacity-50":r(e).processing}]),disabled:r(e).processing},{default:f(()=>[j(" Guardar ")]),_:1},8,["class","disabled"])])],40,W)])]),_:1},8,["show"])]))}};export{oe as default};
