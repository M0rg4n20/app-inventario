import{k,K as y,G as g,I as J,J as m,o as K,m as p,n as b,p as n,u as h,w as u,Z as U,s as e,t as F,v as s,M as q,N as O,x as C,y as j}from"./vendor9df2f612.js";import{_ as R}from"./AuthenticatedLayouta4b2ee4f.js";import{P as W}from"./Pagination7246dab7.js";import{Q as X,Z as P}from"./flowbite-vue17772b29.js";import{_ as Y}from"./InputLabel7da40d8f.js";import{_ as ee}from"./TextInputaca9d9c1.js";const re={class:"ml-4 col-span-full"},te={class:"p-4 mb-4 bg-white col-span-12 border border-gray-200 rounded-lg shadow-sm 2xl:col-span-12 dark:border-gray-700 sm:p-4 dark:bg-gray-800"},ae={class:"overflow-x-auto"},oe={class:"col-span-full flex justify-between items-center"},se={class:"text-xl font-semibold text-gray-900 sm:text-2xl dark:text-white"},de={class:"grid grid-cols-1 p-4 xl:grid-cols-12 md:grid-span-12 xl:gap-4 dark:bg-gray-900 z-20"},le={class:"p-2 col-span-3"},ce={class:"mt-1"},ne={class:"rounded bg-white border border-gray-300 px-1 py-1 space-y-1 absolute z-10"},ie=["onClick"],ge={class:"p-2 col-span-3"},pe={class:"w-full"},be=e("h3",{class:"text-base font-bold text-gray-900 dark:text-white"},"Total venta ",-1),xe={class:"text-2xl font-bold leading-none text-gray-900 sm:text-3xl dark:text-white"},ye={class:"p-2 col-span-3"},he={class:"w-full"},ue=e("h3",{class:"text-base font-bold text-gray-900 dark:text-white"},"Total venta con Efectivo",-1),_e={class:"text-2xl font-bold leading-none text-gray-900 sm:text-3xl dark:text-white"},ke={class:"p-2 col-span-3"},ve={class:"w-full"},we=e("h3",{class:"text-base font-bold text-gray-900 dark:text-white"},"Total venta con tarjetas",-1),fe={class:"text-2xl font-bold leading-none text-gray-900 sm:text-3xl dark:text-white"},me={class:"inline-block min-w-full align-middle"},Fe={class:"overflow-visible"},Ce={class:"w-full text-sm text-left text-gray-600 dark:text-gray-400"},je=e("thead",{class:"text-md text-gray-700 bg-gray-200/80 border-2 border-gray-300 dark:border-gray-700 dark:bg-gray-700 dark:text-gray-400"},[e("tr",null,[e("th",{scope:"col",class:"p-1 text-center border-2 border-gray-300 dark:border-gray-500"}," ID "),e("th",{scope:"col",class:"p-1 text-center border-2 border-gray-300 dark:border-gray-500"}," Ticket "),e("th",{scope:"col",class:"p-1 text-center border-2 border-gray-300 dark:border-gray-500"}," Vendedor "),e("th",{scope:"col",class:"p-1 text-center border-2 border-gray-300 dark:border-gray-500"}," Neto "),e("th",{scope:"col",class:"p-1 text-center border-2 border-gray-300 dark:border-gray-500"}," Descuento "),e("th",{scope:"col",class:"p-1 text-center border-2 border-gray-300 dark:border-gray-500"}," Total "),e("th",{scope:"col",class:"p-1 text-center border-2 border-gray-300 dark:border-gray-500"}," Métodos Pagos "),e("th",{scope:"col",class:"p-1 text-center border-2 border-gray-300 dark:border-gray-500"}," Efectivo "),e("th",{scope:"col",class:"p-1 text-center border-2 border-gray-300 dark:border-gray-500"}," Tarjetas "),e("th",{scope:"col",class:"p-1 text-center border-2 border-gray-300 dark:border-gray-500"}," Cambio "),e("th",{scope:"col",class:"p-1 text-center border-2 border-gray-300 dark:border-gray-500"}," Tipo venta "),e("th",{scope:"col",class:"p-1 text-center border-2 border-gray-300 dark:border-gray-500"}," Forma entrega "),e("th",{scope:"col",class:"p-1 text-center border-2 border-gray-300 dark:border-gray-500"}," Fecha ")])],-1),Pe={scope:"row",class:"px-3 py-1 border-2 text-center border-gray-300 dark:border-gray-700 font-medium text-gray-900 whitespace-nowrap dark:text-white"},Te={scope:"row",class:"px-3 py-1 border-2 border-gray-300 dark:border-gray-700 font-normal text-gray-900 whitespace-nowrap dark:text-white"},Ie={scope:"row",class:"px-3 py-1 border-2 border-gray-300 dark:border-gray-700 font-normal text-gray-900 whitespace-nowrap dark:text-white"},Ve={scope:"row",class:"px-3 py-1 border-2 text-end border-gray-300 dark:border-gray-700 font-normal text-gray-900 whitespace-nowrap dark:text-white"},Le={scope:"row",class:"px-3 py-1 border-2 text-end border-gray-300 dark:border-gray-700 font-normal text-gray-900 whitespace-nowrap dark:text-white"},De={scope:"row",class:"px-3 py-1 border-2 text-end border-gray-300 dark:border-gray-700 font-normal text-gray-900 whitespace-nowrap dark:text-white"},Ne={scope:"row",class:"px-3 py-1 border-2 border-gray-300 dark:border-gray-700 font-normal text-gray-900 whitespace-nowrap dark:text-white"},Ee={scope:"row",class:"px-3 py-1 border-2 text-end border-gray-300 dark:border-gray-700 font-normal text-gray-900 whitespace-nowrap dark:text-white"},Me={scope:"row",class:"px-3 py-1 border-2 text-end border-gray-300 dark:border-gray-700 font-normal text-gray-900 whitespace-nowrap dark:text-white"},Be={scope:"row",class:"px-3 py-1 border-2 text-end border-gray-300 dark:border-gray-700 font-normal text-gray-900 whitespace-nowrap dark:text-white"},Se={scope:"row",class:"px-3 py-1 border-2 text-center border-gray-300 dark:border-gray-700 font-normal text-gray-900 whitespace-nowrap dark:text-white"},Ze={scope:"row",class:"px-3 py-1 border-2 text-center border-gray-300 dark:border-gray-700 font-normal text-gray-900 whitespace-nowrap dark:text-white"},$e={scope:"row",class:"px-3 py-1 border-2 text-end border-gray-300 dark:border-gray-700 font-normal text-gray-900 whitespace-nowrap dark:text-white"},qe={__name:"Index",setup(ze){const v=k({}),c=k(""),x=k(!1),{lista_fechas:T}=y().props,{hoy:I}=y().props,V=g(()=>{if(c.value==="")return x.value=!1,[];x.value=!0;let a=0;return T.filter(o=>{if(o.name.toLowerCase().includes(c.value.toLowerCase())&&a<10)return a++,o})}),L=(a,o,t)=>{x.value=!1,c.value=a},l=g(()=>{let a=y().props.cortecaja;return c.value!==""&&(i.currentPage=1,a=v.value.filter(o=>o.fecha.toLowerCase().includes(c.value.toLowerCase()))),a}),w=g(()=>{var a=parseFloat(l.value.reduce((r,d)=>r+parseFloat(d.monto_tarjeta),0)),o=parseFloat(l.value.reduce((r,d)=>r+parseFloat(d.monto_efectivo),0)),t=parseFloat(l.value.reduce((r,d)=>r+parseFloat(d.saldo<0?parseFloat(d.saldo)*-1:0),0));return t-=parseFloat(l.value.reduce((r,d)=>r+parseFloat(parseInt(d.metodo_pago_id)==3&&parseFloat(d.saldo)<0?d.monto_tarjeta:0),0)),(parseFloat(a-t)+parseFloat(o)).toFixed(2)}),D=g(()=>{var a=parseFloat(l.value.reduce((t,r)=>t+parseFloat(r.monto_efectivo),0)),o=parseFloat(l.value.reduce((t,r)=>t+parseFloat(r.saldo<0?parseFloat(r.saldo)*-1:0),0));return o-=parseFloat(l.value.reduce((t,r)=>t+parseFloat(parseInt(r.metodo_pago_id)==3&&parseFloat(r.saldo)<0?r.monto_tarjeta:0),0)),(a-o).toFixed(2)}),N=g(()=>l.value.reduce((a,o)=>a+parseFloat(o.monto_tarjeta),0).toFixed(2)),i=J({currentPage:1,perPage:10,totalPages:g(()=>Math.ceil(l.value.length/i.perPage))});m(()=>i.totalPages,()=>i.currentPage=1),m([w],(a,o)=>{});const E=g(()=>{const{currentPage:a,perPage:o}=i,t=(a-1)*o,r=t+o;return l.value.slice(t,r)}),M=a=>{i.currentPage=a};return K(()=>{v.value=y().props.cortecaja,c.value=I}),(a,o)=>(p(),b("div",null,[n(h(U),{title:"Caja"}),n(R,null,{default:u(()=>[e("div",re,[n(h(X),null,{default:u(()=>[n(h(P),{href:"/",home:""},{default:u(()=>[F(" Inicio ")]),_:1}),n(h(P),null,{default:u(()=>[F(" Caja ")]),_:1})]),_:1})]),e("div",te,[e("div",ae,[e("div",oe,[e("h1",se,"Caja - Total del corte de: "+s(c.value),1)]),e("div",de,[e("div",le,[n(Y,{for:"search",value:"Desglose general",class:"block text-base font-bold leading-6 mb-0 text-gray-900 dark:text-white"}),e("div",ce,[n(ee,{id:"search",type:"text",modelValue:c.value,"onUpdate:modelValue":o[0]||(o[0]=t=>c.value=t),autocomplete:"search",class:"block w-full text-gray-900 border border-gray-300 rounded bg-gray-50 sm:text-base focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Ingrese la fecha"},null,8,["modelValue"]),q(e("ul",ne,[(p(!0),b(C,null,j(V.value,t=>(p(),b("li",{key:t.name,onClick:r=>L(t.name,!1,r),class:"cursor-pointer hover:bg-gray-100 p-1"},s(t.name),9,ie))),128))],512),[[O,x.value]])])]),e("div",ge,[e("div",pe,[be,e("span",xe,s(w.value),1)])]),e("div",ye,[e("div",he,[ue,e("span",_e,s(D.value),1)])]),e("div",ke,[e("div",ve,[we,e("span",fe,s(N.value),1)])])]),e("div",me,[e("div",Fe,[e("table",Ce,[je,e("tbody",null,[(p(!0),b(C,null,j(E.value,({id:t,codigo:r,vendedor:d,neto:B,monto_efectivo:S,forma_entrega:Z,descuento:$,monto_tarjeta:f,saldo:_,total:z,metodo_pago:Q,metodo_pago_id:A,tipo_pago:G,fecha:H},Qe)=>(p(),b("tr",{key:t,class:"bg-white border-b dark:bg-gray-800 dark:border-gray-700"},[e("td",Pe,s(t),1),e("td",Te,s(r),1),e("td",Ie,s(d),1),e("td",Ve,s(B),1),e("td",Le,s($),1),e("td",De,s(z),1),e("td",Ne,s(Q),1),e("td",Ee,s(S),1),e("td",Me,s(f),1),e("td",Be,s(_<0?A==3?_*-1-f:_*-1:0),1),e("td",Se,s(G),1),e("td",Ze,s(Z),1),e("td",$e,s(H),1)]))),128))])]),n(W,{pageCount:i.totalPages,class:"my-3",containerClass:"flex items-center -space-x-px h-10 text-base",prevLinkClass:"flex items-center  cursor-pointer justify-center px-2  h-10 ml-0 leading-tight text-gray-500  border border-gray-300 rounded-l-lg hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white",nextLinkClass:"flex items-center cursor-pointer justify-center px-2 h-10 leading-tight text-gray-500  border border-gray-300 rounded-r-lg hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white",pageLinkClass:"flex items-center hover:cursor-pointer justify-center px-5 h-10 leading-tight text-gray-500  border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white",prevText:"«  Anterior",nextText:"Siguiente  »",disabledClass:"bg-gray-100 cursor-not-allowed",activeClass:"bg-gray-200 cursor-pointer",clickHandler:M},null,8,["pageCount"])])])])])]),_:1})]))}};export{qe as default};
