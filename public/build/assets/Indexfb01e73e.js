import{G as O,m as b,n as g,H as Q,C as Z,k as n,K as S,o as z,J as F,T as H,p as a,u as l,w as p,q as U,Z as q,s as e,t as m,v as r,x as G,y as J,M as K,N as L}from"./vendor9df2f612.js";import{_ as W,h as X}from"./AuthenticatedLayouta4b2ee4f.js";import{Q as ee,Z as E}from"./flowbite-vue17772b29.js";import"./sweetalert2.all2e5f4a54.js";import{D as h,l as re}from"./es-ESfe29d7f2.js";import oe from"./EditarModalde9cb500.js";import{_ as se}from"./TextInputaca9d9c1.js";import{s as ae}from"./multiselectf73eb494.js";import{S as te}from"./sortable.esm0d19b1d3.js";import"./InputError36fdb8dd.js";import"./InputLabel7da40d8f.js";import"./Modale28fe8ea.js";import"./PrimaryButton0ecc7f29.js";import"./es.es96ee115e.js";const de={__name:"StatusColor",props:{texto:{type:String}},setup(v){const c=v,y=O(()=>{if(c.texto=="Asignado")return"bg-yellow-300";if(c.texto=="Cancelado")return"bg-red-600";if(c.texto=="Entregado")return"bg-green-600"});return(t,_)=>(b(),g("div",{class:Z(y.value+" p-0 flex m-0 justify-center items-center text-xs text-white font-semibold h-5 rounded  mx-auto")},[Q(t.$slots,"default")],2))}};const le={class:"ml-4 col-span-full"},ce={class:"p-4 mb-4 bg-white col-span-12 pb-5 rounded-lg shadow-sm 2xl:col-span-12 dark:border-gray-700 sm:p-4 dark:bg-gray-800"},ne={class:"overflow-x-auto"},ie={class:"lg:inline-block min-w-full mt-4"},pe={class:"overflow-auto"},ue={class:"mt-4 flex justify-end"},be={class:"w-1/4 pr-2"},ge={class:"w-1/4 pr-2"},ye={id:"tabla1",class:"pt-3 w-full text-sm text-center text-gray-600 dark:text-gray-400"},_e=e("thead",{class:"text-md text-center text-gray-700 bg-gray-200/80 dark:bg-gray-700 dark:text-gray-400"},[e("tr",null,[e("th",{scope:"col",class:"border border-gray-300 dark:border-gray-500",title:"Prioridad"},[e("div",{class:"flex justify-center"})]),e("th",{scope:"col",class:"border border-gray-300 dark:border-gray-500"},[e("div",{class:"flex justify-center"}," ID ")]),e("th",{scope:"col",class:"border border-gray-300 dark:border-gray-500"},[e("div",{class:"flex justify-center text-center"}," Cliente ")]),e("th",{scope:"col",class:"border border-gray-300 dark:border-gray-500"},[e("div",{class:"flex justify-center"}," Pedido ")]),e("th",{scope:"col",class:"border border-gray-300 dark:border-gray-500"},[e("div",{class:"flex justify-center"}," Calle ")]),e("th",{scope:"col",class:"border border-gray-300 dark:border-gray-500"},[e("div",{class:"flex justify-center"}," Colonia ")]),e("th",{scope:"col",class:"border border-gray-300 dark:border-gray-500"},[e("div",{class:"flex justify-center"}," TelÃ©fono ")]),e("th",{scope:"col",class:"border border-gray-300 dark:border-gray-500"},[e("div",{class:"flex justify-center"}," Ruta ")]),e("th",{scope:"col",class:"border border-gray-300 dark:border-gray-500"},[e("div",{class:"flex justify-center"}," Repartidor ")]),e("th",{scope:"col",class:"border border-gray-300 dark:border-gray-500"},[e("div",{class:"flex justify-center"}," Estado ")]),e("th",{scope:"col",class:"border border-gray-300 dark:border-gray-500"},[e("div",{class:"flex justify-center"}," Comentario ")]),e("th",{scope:"col",class:"border border-gray-300 dark:border-gray-500"},[e("div",{class:"flex justify-center"}," Fecha ")]),e("th",{scope:"col",class:"border border-gray-300 dark:border-gray-500"},[e("div",{class:"flex justify-center"}," Hora ")]),e("th",{scope:"col",class:"border border-gray-300 dark:border-gray-500"},[e("div",{class:"flex justify-center"}," Acciones ")])])],-1),fe={scope:"row",class:"p-1 border dark:bg-gray-800 dark:border-gray-700 font-medium text-gray-900 dark:text-white"},me={title:"Prioridad"},he={scope:"row",class:"p-1 border dark:bg-gray-800 dark:border-gray-700 font-medium text-gray-900 dark:text-white"},xe={scope:"row",class:"p-1 border dark:bg-gray-800 dark:border-gray-700 font-medium text-gray-900 dark:text-white"},ve={scope:"row",class:"p-1 border text-start dark:border-gray-700"},ke={scope:"row",class:"p-1 border dark:border-gray-700"},we={scope:"row",class:"p-1 border dark:border-gray-700"},je={scope:"row",class:"p-1 border dark:border-gray-700"},Ce={scope:"row",class:"p-1 border dark:border-gray-700"},Se={scope:"row",class:"p-1 border dark:border-gray-700"},Ee={scope:"row",class:"p-1 border dark:border-gray-700"},Ie={scope:"row",class:"p-1 border dark:border-gray-700"},Te={scope:"row",class:"p-1 border dark:border-gray-700"},Ve={scope:"row",class:"p-1 border dark:border-gray-700"},De={scope:"row",class:"p-1 border mx-auto dark:border-gray-700"},x="Envios",Ge={__name:"Index",setup(v){h.use(h);const c=n(null),{permissions:y}=S().props.auth,t=n([]),_=n(null),I=n({value:"",placeholder:"Seleccione",options:[{value:"Asignado",label:"Asignado"},{value:"Entregado",label:"Entregado"},{value:"Cancelado",label:"Cancelado"},{value:"Reprogramado",label:"Reprogramado"}]}),T={responsive:!0,language:re,order:[0,"asc"]},u=n(""),f=n(""),V=()=>{U(()=>{_.value=new h("#tabla1",T)})};setTimeout(()=>{route().current("envios.index")&&window.open(self.location,"_self")},6e4),z(()=>{t.value=S().props.pedidos,V(),new te(c.value,{animation:150,onEnd:d=>{const o=d.oldIndex,s=d.newIndex,i=t.value;i.splice(s,0,i.splice(o,1)[0]),t.value=i,D()},ghostClass:"dragged-row",chosenClass:"dragged-row"})});const k=()=>{const d=`${u.value||""} ${f.value||""}`;_.value.search(d).draw()};F(u,()=>{k()});const D=()=>{const d=t.value.map((o,s)=>({id:o.id,order:s+1}));axios.post(route("envios.save-order"),{order:d}).then(o=>{console.log("Orden guardado exitosamente")}).catch(o=>{console.error("Error al guardar el orden: ",o)})};return H({id:""}),(d,o)=>(b(),g("div",null,[a(l(q),{title:x}),a(W,null,{default:p(()=>[e("div",le,[a(l(ee),null,{default:p(()=>[a(l(E),{href:"/",home:""},{default:p(()=>[m(" Inicio ")]),_:1}),a(l(E),null,{default:p(()=>[m(r(x))]),_:1})]),_:1})]),e("div",{class:"px-5 col-span-full flex justify-between items-center"},[e("h1",{class:"text-xl font-semibold text-gray-900 sm:text-2xl dark:text-white"},r(x))]),e("div",ce,[e("div",ne,[e("div",ie,[e("div",pe,[e("div",ue,[e("div",be,[a(l(ae),{modelValue:u.value,"onUpdate:modelValue":o[0]||(o[0]=s=>u.value=s),options:I.value.options,placeholder:"Seleccione el estado"},null,8,["modelValue","options"])]),e("div",ge,[a(se,{id:"buscarPorRepartidor",type:"search",modelValue:f.value,"onUpdate:modelValue":o[1]||(o[1]=s=>f.value=s),onInput:k,placeholder:"Buscar"},null,8,["modelValue"])])]),e("table",ye,[_e,e("tbody",{ref_key:"sortableTable",ref:c,class:"sortable"},[(b(!0),g(G,null,J(t.value,({id:s,telefono:i,venta:w,colonia:$,estado:j,ruta:R,direccion:P,fecha:A,hora:B,orden:M,comentario:N,repartidor:Y,created_at:$e},Re)=>(b(),g("tr",{key:s,class:"bg-white text-center dark:bg-gray-800 dark:border-gray-700"},[e("th",fe,[e("span",me,r(M),1)]),e("th",he,r(s),1),e("th",xe,r(w.cliente.nombre),1),e("td",ve,r(w.detalles_ventas.map(C=>"Cantidad: "+C.cantidad+" -- Producto: "+C.producto.nombre).join(" | ")),1),e("td",ke,r(P),1),e("td",we,r($),1),e("td",je,r(i),1),e("td",Ce,r(R.nombre),1),e("td",Se,r(Y.name),1),e("td",Ee,[a(de,{texto:j},{default:p(()=>[m(r(j),1)]),_:2},1032,["texto"])]),e("td",Ie,r(N),1),e("td",Te,r(l(X)(String(A)).format("DD/MM/YYYY")),1),e("td",Ve,r(B),1),e("td",De,[K(a(oe,{"cliente-id":s},null,8,["cliente-id"]),[[L,l(y).includes("editar-envios")]])])]))),128))],512)])])])])])]),_:1})]))}};export{Ge as default};
