import{k as d,K as N,T as O,J as _,m as $,n as R,s as l,p as t,w as y,z as T,u as o,A as f,M as A,al as B,C as F,t as I,a as k,O as j}from"./vendor9df2f612.js";import{_ as n}from"./InputError36fdb8dd.js";import{_ as i}from"./InputLabel7da40d8f.js";import{_ as G}from"./Modale28fe8ea.js";import{_ as w}from"./TextInputaca9d9c1.js";import{_ as H}from"./PrimaryButton0ecc7f29.js";import{S as J}from"./sweetalert2.all2e5f4a54.js";import{s as b}from"./multiselectf73eb494.js";import{i as K}from"./es.es96ee115e.js";const P={class:"p-2"},q=l("div",{class:"p-4 mb-4 rounded-t flex justify-between items-center border-b border-gray-200 dark:border-gray-600"},[l("h2",{class:"text-lg font-medium text-gray-900"}," Editar ")],-1),L=["onSubmit"],Q={class:"px-2 grid grid-cols-6 gap-4 md:gap-3 2xl:gap-6 mb-2"},W={class:"col-span-6 shadow-default xl:col-span-3"},X={class:"col-span-6 shadow-default xl:col-span-3"},Z={class:"col-span-6 shadow-default xl:col-span-3"},ee={class:"col-span-6 shadow-default xl:col-span-3"},ae={class:"col-span-6 shadow-default xl:col-span-3 z-50"},oe={class:"col-span-6 shadow-default xl:col-span-3 z-50"},te={class:"col-span-6 shadow-default xl:col-span-6 z-50 mb-5"},se={class:"flex justify-end pt-0"},m="envios",fe={__name:"EditarModal",props:{clienteId:{type:Number,default:null}},setup(V){const S=V,c=d(!1),u=d(),g=d(""),x=d(""),{user:C}=N().props.auth,e=O({id:"",comentario:"",telefono:"",casa_direccion:"",casa_colonia:"",fecha:"",hora:"",ruta_id:"",repartidor_id:"",estado:"",responsable_id:""}),p=d({value:"",closeOnSelect:!0,placeholder:"Seleccione",searchable:!0,options:[]}),h=d({value:"",closeOnSelect:!0,placeholder:"Seleccione",searchable:!0,options:[]});_(g,()=>e.oficina_colonia=g.value),_(x,()=>e.casa_colonia=x.value);const E=r=>{e.fecha=r,u.value=r},M=d({value:"",closeOnSelect:!0,placeholder:"Seleccione",searchable:!0,options:[{value:"Asignado",label:"Asignado"},{value:"Entregado",label:"Entregado"},{value:"Cancelado",label:"Cancelado"},{value:"Reprogramado",label:"Reprogramado"}]}),Y=()=>{U(S.clienteId)},U=r=>{k.get(route(m+".asignar",r)).then(s=>{var a=s.data;p.value.options=a.rutas,h.value.options=a.repartidores,e.responsable_id=C.id}),k.get(route(m+".show",r)).then(s=>{c.value=!0;var a=s.data.data;e.id=a.id,e.comentario=a.comentario,e.telefono=a.telefono,e.estado=a.estado,e.casa_colonia=a.casa_colonia,e.fecha=a.fecha,e.hora=a.hora,e.ruta_id=a.ruta_id,e.repartidor_id=a.repartidor_id,u.value=a.fecha,p.value.value=1})},v=()=>{c.value=!1,e.reset()},z=()=>{e.clearErrors(),e.post(route(m+".update",e.id),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{c.value=!1,D("Editado"),j.get(route(m+".index"))},onFinish:()=>{},onError:()=>{}})},D=r=>{e.reset(),J.fire({width:350,title:r,icon:"success"})};return(r,s)=>($(),R("section",null,[l("button",{type:"button",class:"rounded bg-blue-500 px-1 py-1 text-xs font-normal text-white mr-1 mb-1 hover:bg-blue-600",onClick:Y},"Editar"),t(G,{show:c.value,onClose:v},{default:y(()=>[l("div",P,[q,l("form",{onSubmit:T(z,["prevent"])},[l("div",Q,[l("div",W,[t(i,{for:"ruta",value:"Ruta",class:"block text-base font-medium leading-6 text-gray-900"}),t(o(b),f({id:"ruta",modelValue:o(e).ruta_id,"onUpdate:modelValue":s[0]||(s[0]=a=>o(e).ruta_id=a)},p.value),null,16,["modelValue"]),t(n,{class:"mt-1 text-xs",message:o(e).errors.ruta_id},null,8,["message"])]),l("div",X,[t(i,{for:"repartidor",value:"Repartidor",class:"block text-base font-medium leading-6 text-gray-900"}),t(o(b),f({id:"repartidor",modelValue:o(e).repartidor_id,"onUpdate:modelValue":s[1]||(s[1]=a=>o(e).repartidor_id=a)},h.value),null,16,["modelValue"]),t(n,{class:"mt-1 text-xs",message:o(e).errors.repartidor_id},null,8,["message"])]),l("div",Z,[t(i,{for:"telefono",value:"TÃ©lefono",class:"block text-base font-medium leading-6 text-gray-900"}),t(w,{id:"telefono",type:"text",modelValue:o(e).telefono,"onUpdate:modelValue":s[2]||(s[2]=a=>o(e).telefono=a),placeholder:"Ingrese telefono",class:"block w-full text-gray-900 border border-gray-300 rounded bg-gray-50 sm:text-base focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},null,8,["modelValue"]),t(n,{class:"mt-1 text-xs",message:o(e).errors.telefono},null,8,["message"])]),l("div",ee,[t(i,{for:"estado",value:"Estado",class:"block text-base font-medium leading-6 text-gray-900"}),t(o(b),f({id:"estado",modelValue:o(e).estado,"onUpdate:modelValue":s[3]||(s[3]=a=>o(e).estado=a)},M.value),null,16,["modelValue"]),t(n,{class:"mt-1 text-xs",message:o(e).errors.estado},null,8,["message"])]),l("div",ae,[t(i,{for:"fecha",value:"Fecha",class:"block text-base font-medium leading-6 text-gray-900"}),t(o(K),{value:u.value,"onUpdate:value":s[4]||(s[4]=a=>u.value=a),"value-type":"YYYY-MM-DD",format:"DD/MM/YYYY",type:"date",onChange:E,lang:"es",placeholder:"Seleccione fecha"},null,8,["value"]),t(n,{class:"mt-1 text-xs",message:o(e).errors.fecha},null,8,["message"])]),l("div",oe,[t(i,{for:"hora",value:"Hora",class:"block text-base font-medium leading-6 text-gray-900"}),t(w,{id:"hora",type:"time",modelValue:o(e).hora,"onUpdate:modelValue":s[5]||(s[5]=a=>o(e).hora=a)},null,8,["modelValue"]),t(n,{class:"mt-1 text-xs",message:o(e).errors.hora},null,8,["message"])]),l("div",te,[t(i,{for:"comentario",value:"Comentario",class:"block text-base font-medium leading-6 text-gray-900"}),A(l("textarea",{id:"comentario",placeholder:"Comentario","onUpdate:modelValue":s[6]||(s[6]=a=>o(e).comentario=a),class:"shadow-sm bg-gray-50 border border-gray-300 text-gray-900 text-md rounded p-1 block w-full dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:border-primary-500",rows:"2",cols:"50"},null,512),[[B,o(e).comentario]]),t(n,{class:"mt-1 text-xs",message:o(e).errors.comentario},null,8,["message"])])]),l("div",se,[l("button",{onClick:v,type:"button",class:"inline-block rounded bg-red-600 p-2 text-sm font-semibold text-white mr-4 mb-1 hover:bg-red-700"}," Cancelar "),t(H,{class:F(["inline-block rounded bg-blue-600 p-2 text-sm font-semibold text-white mr-1 mb-1 hover:bg-blue-700",{"opacity-50":o(e).processing}]),disabled:o(e).processing},{default:y(()=>[I(" Guardar ")]),_:1},8,["class","disabled"])])],40,L)])]),_:1},8,["show"])]))}};export{fe as default};
