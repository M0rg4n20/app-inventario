import{_ as le,k as c,o as re,K as _,T as ie,m,n as p,s as l,p as t,w as B,z as de,u as o,A as g,M as w,an as z,B as y,a8 as K,x as R,y as A,am as L,v as E,C as ne,t as ce,O as ue,P as me,Q as pe}from"./vendor9df2f612.js";import{_ as r}from"./InputError36fdb8dd.js";import{_ as i}from"./InputLabel7da40d8f.js";import{_ as _e}from"./Modale28fe8ea.js";import{s as x}from"./multiselectf73eb494.js";import{_ as u}from"./TextInputaca9d9c1.js";import{_ as ge}from"./PrimaryButton0ecc7f29.js";import{S as xe}from"./sweetalert2.all2e5f4a54.js";const b=k=>(me("data-v-7a0425c6"),k=k(),pe(),k),ve={class:"space-y-4"},fe={class:"p-2"},be=b(()=>l("div",{class:"p-4 mb-4 rounded-t flex justify-between items-center border-b border-gray-200 dark:border-gray-600"},[l("h2",{class:"text-lg font-medium text-gray-900"}," Crear Producto ")],-1)),ye=["onSubmit"],ke={class:"px-2 grid grid-cols-12 gap-3 xl:gap-3 mt-2 mb-2"},he={class:"col-span-12"},Ve={class:"hidden"},Se={class:"col-span-12"},we={class:"col-span-12 xl:col-span-6"},Ue={class:"col-span-12 xl:col-span-6"},Ce={class:"col-span-12 xl:col-span-6"},je={class:"col-span-12 xl:col-span-6"},Ie={class:"col-span-12 xl:col-span-6"},Me={class:"col-span-12 xl:col-span-6"},Pe={class:"col-span-12 xl:col-span-6"},Fe={class:"col-span-12 xl:col-span-6"},Oe={class:"col-span-12 xl:col-span-6"},De={class:"col-span-12 xl:col-span-6"},Ne={class:"col-span-6 xl:col-span-3"},$e={class:"col-span-6 xl:col-span-3"},Be={class:"col-span-6 xl:col-span-3"},ze={class:"flex flex-col"},Ke={class:"flex w-full my-2 items-center"},Re=b(()=>l("label",{for:"check_venta",class:"text-xs font-normal pl-2 dark:text-white text-gray-900"},"Utilizar porcentaje venta",-1)),Ae={key:0,class:"flex w-50"},Le=b(()=>l("div",{class:"w-8 flex items-center justify-center bg-gray-50 border border-gray-300 text-gray-900 text-md font-bold p-1 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}," %",-1)),Ee={class:"col-span-6 xl:col-span-3"},Te={class:"flex flex-col"},We={class:"flex w-full my-2 items-center"},Ge=b(()=>l("label",{for:"check_mayorista",class:"text-xs font-normal pl-2 text-gray-900 dark:text-white"},"Utilizar porcentaje mayorista",-1)),Qe={key:0,class:"flex w-50"},qe=b(()=>l("div",{class:"w-8 flex items-center justify-center bg-gray-50 border border-gray-300 text-gray-900 dark:text-white text-md font-bold p-1 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}," %",-1)),He={class:"col-span-12 xl:col-span-2"},Je={class:"col-span-7 xl:col-span-7 my-2"},Xe={key:0},Ye=b(()=>l("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-300",id:"imagen_1"},"Peso máximo de la foto 2MB",-1)),Ze={key:1},eo={class:"col-span-3 xl:col-span-3 flex items-center"},oo=["value"],ao={class:"font-bold"},to={class:"col-span-12 xl:col-span-2"},so={class:"col-span-7 xl:col-span-7 my-2"},lo={key:0},ro=b(()=>l("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-300",id:"imagen_2"},"Peso máximo de la foto 2MB",-1)),io={key:1},no={class:"col-span-3 xl:col-span-3 flex items-center"},co=["value"],uo={class:"font-bold"},mo={class:"flex justify-end pt-0"},po={__name:"CrearModal",setup(k){const h=c(!1),D=c([{name:"local"},{name:"url"}]),V=c("/images/productos/temp_producto.png"),S=c("/images/productos/temp_producto.png"),T=d=>{d.preventDefault(),e.photo_1=d.target.files[0];let s=d.target.files;if(s&&s[0]){let a=new FileReader;a.onload=n=>{V.value=n.target.result},a.readAsDataURL(s[0])}},W=d=>{d.preventDefault(),e.photo_2=d.target.files[0];let s=d.target.files;if(s&&s[0]){let a=new FileReader;a.onload=n=>{S.value=n.target.result},a.readAsDataURL(s[0])}},v=d=>{e.codigo=e.familia_id+e.subproducto_id+e.marca_id+e.peso_id+e.longitud_id+e.curva_id+e.color_id+e.diferenciador_id,e.familia_id&&f(U.value.options,e.familia_id);const s=e.subproducto_id?f(j.value.options,e.subproducto_id):"",a=e.marca_id?f(C.value.options,e.marca_id):"",n=e.peso_id?f(I.value.options,e.peso_id):"",Z=e.longitud_id?f(F.value.options,e.longitud_id):"",ee=e.curva_id?f(M.value.options,e.curva_id):"",oe=e.color_id?f(P.value.options,e.color_id):"",ae=e.diferenciador_id?f(O.value.options,e.diferenciador_id):"",te=[s,a,n,Z,ee,oe,ae].filter(se=>se).join(" ");e.nombre=te},f=(d,s)=>{const a=d.find(n=>n.value===s);if(a){const n=a.label.split("|");return n.length>1?n[1].trim():a.label.trim()}return""},G=d=>{V.value=e.image_url_1},Q=d=>{S.value=e.image_url_2},q=d=>{e.precio_compra>0&&(e.precio_venta=parseFloat(e.precio_compra)+parseFloat(e.precio_compra*e.porcentaje_venta/100))},H=d=>{e.precio_compra>0&&(e.precio_mayorista=parseFloat(e.precio_compra)+parseFloat(e.precio_compra*e.porcentaje_mayorista/100))},J=()=>{h.value=!0};re(()=>{$.value.options=_().props.categorias,U.value.options=_().props.familias,j.value.options=_().props.subproductos,C.value.options=_().props.marcas,I.value.options=_().props.pesos,F.value.options=_().props.longitudes,M.value.options=_().props.curvas,P.value.options=_().props.colores,O.value.options=_().props.diferenciadores});const N=()=>{h.value=!1,e.reset()},e=ie({nombre:"",categoria_id:"",descripcion:"",familia_id:"",subproducto_id:"",marca_id:"",peso_id:"",longitud_id:"",curva_id:"",color_id:"",diferenciador_id:"",codigo:"",codigo_barra:"",precio_compra:"",stock:"",precio_venta:"",precio_mayorista:"",porcentaje_mayorista:"",porcentaje_venta:"",check_mayorista:null,check_venta:null,imagen_1:"",imagen_2:"",photo_1:"",photo_2:"",tipo_img_1:"local",tipo_img_2:"local",image_url_1:"",image_url_2:""}),$=c({value:"",closeOnSelect:!0,placeholder:"Seleccione",searchable:!0,options:[]}),U=c({value:"",closeOnSelect:!0,placeholder:"Seleccione",searchable:!0,options:[]}),C=c({value:"",closeOnSelect:!0,placeholder:"Seleccione",searchable:!0,options:[]}),j=c({value:"",closeOnSelect:!0,placeholder:"Seleccione",searchable:!0,options:[]}),I=c({value:"",closeOnSelect:!0,placeholder:"Seleccione",searchable:!0,options:[]}),M=c({value:"",closeOnSelect:!0,placeholder:"Seleccione",searchable:!0,options:[]}),P=c({value:"",closeOnSelect:!0,placeholder:"Seleccione",searchable:!0,options:[]}),F=c({value:"",closeOnSelect:!0,placeholder:"Seleccione",searchable:!0,options:[]}),O=c({value:"",closeOnSelect:!0,placeholder:"Seleccione",searchable:!0,options:[]}),X=()=>{e.clearErrors(),e.post(route("productos.store"),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{h.value=!1,Y("Producto Creado"),e.reset(),V.value="/images/productos/temp_producto.png",S.value="/images/productos/temp_producto.png",ue.get(route("productos.index"))},onFinish:()=>{},onError:()=>{}})},Y=d=>{e.reset(),xe.fire({width:350,title:d,icon:"success"})};return(d,s)=>(m(),p("section",ve,[l("button",{type:"button",onClick:J,class:"m-1 p-2 text-sm font-medium rounded text-center text-white bg-green-500 hover:bg-green-600 dark:bg-green-500 dark:hover:bg-green-700"}," Agregar Producto "),t(_e,{show:h.value,onClose:N},{default:B(()=>[l("div",fe,[be,l("form",{onSubmit:de(X,["prevent"])},[l("div",ke,[l("div",he,[t(i,{for:"nombre",value:"Nombre",class:"block text-base font-medium leading-6 text-gray-900"}),t(u,{id:"nombre",type:"text",modelValue:o(e).nombre,"onUpdate:modelValue":s[0]||(s[0]=a=>o(e).nombre=a),autocomplete:"nombre",placeholder:"Ingrese nombre",readonly:""},null,8,["modelValue"]),t(r,{class:"mt-1 text-xs",message:o(e).errors.nombre},null,8,["message"])]),l("div",Ve,[t(i,{for:"categoria_id",value:"Categoria",class:"block text-base font-medium leading-6 text-gray-900"}),t(o(x),g({id:"categoria_id",modelValue:o(e).categoria_id,"onUpdate:modelValue":s[1]||(s[1]=a=>o(e).categoria_id=a)},$.value),null,16,["modelValue"]),t(r,{class:"mt-1 text-xs",message:o(e).errors.categoria_id},null,8,["message"])]),l("div",Se,[t(i,{for:"descripcion",value:"Descripción",class:"block text-base font-medium leading-6 text-gray-900"}),t(u,{id:"descripcion",type:"text",modelValue:o(e).descripcion,"onUpdate:modelValue":s[2]||(s[2]=a=>o(e).descripcion=a),autocomplete:"descripcion",placeholder:"Ingrese descripcion"},null,8,["modelValue"]),t(r,{class:"mt-1 text-xs",message:o(e).errors.descripcion},null,8,["message"])]),l("div",we,[t(i,{for:"familia_id",value:"Familia",class:"block text-base font-medium leading-6 text-gray-900"}),t(o(x),g({id:"familia_id",modelValue:o(e).familia_id,"onUpdate:modelValue":s[3]||(s[3]=a=>o(e).familia_id=a)},U.value,{onSelect:v}),null,16,["modelValue"]),t(r,{class:"mt-1 text-xs",message:o(e).errors.familia_id},null,8,["message"])]),l("div",Ue,[t(i,{for:"subproducto_id",value:"Sub producto",class:"block text-base font-medium leading-6 text-gray-900"}),t(o(x),g({id:"subproducto_id",modelValue:o(e).subproducto_id,"onUpdate:modelValue":s[4]||(s[4]=a=>o(e).subproducto_id=a)},j.value,{onSelect:v}),null,16,["modelValue"]),t(r,{class:"mt-1 text-xs",message:o(e).errors.subproducto_id},null,8,["message"])]),l("div",Ce,[t(i,{for:"marca_id",value:"Marca",class:"block text-base font-medium leading-6 text-gray-900"}),t(o(x),g({id:"marca_id",modelValue:o(e).marca_id,"onUpdate:modelValue":s[5]||(s[5]=a=>o(e).marca_id=a)},C.value,{onSelect:v}),null,16,["modelValue"]),t(r,{class:"mt-1 text-xs",message:o(e).errors.marca_id},null,8,["message"])]),l("div",je,[t(i,{for:"peso_id",value:"Peso",class:"block text-base font-medium leading-6 text-gray-900"}),t(o(x),g({id:"peso_id",modelValue:o(e).peso_id,"onUpdate:modelValue":s[6]||(s[6]=a=>o(e).peso_id=a)},I.value,{onSelect:v}),null,16,["modelValue"]),t(r,{class:"mt-1 text-xs",message:o(e).errors.peso_id},null,8,["message"])]),l("div",Ie,[t(i,{for:"longitud_id",value:"Longitud",class:"block text-base font-medium leading-6 text-gray-900"}),t(o(x),g({id:"longitud_id",modelValue:o(e).longitud_id,"onUpdate:modelValue":s[7]||(s[7]=a=>o(e).longitud_id=a)},F.value,{onSelect:v}),null,16,["modelValue"]),t(r,{class:"mt-1 text-xs",message:o(e).errors.longitud_id},null,8,["message"])]),l("div",Me,[t(i,{for:"curva_id",value:"Curva",class:"block text-base font-medium leading-6 text-gray-900"}),t(o(x),g({id:"curva_id",modelValue:o(e).curva_id,"onUpdate:modelValue":s[8]||(s[8]=a=>o(e).curva_id=a)},M.value,{onSelect:v}),null,16,["modelValue"]),t(r,{class:"mt-1 text-xs",message:o(e).errors.curva_id},null,8,["message"])]),l("div",Pe,[t(i,{for:"color_id",value:"Color",class:"block text-base font-medium leading-6 text-gray-900"}),t(o(x),g({id:"color_id",modelValue:o(e).color_id,"onUpdate:modelValue":s[9]||(s[9]=a=>o(e).color_id=a)},P.value,{onSelect:v}),null,16,["modelValue"]),t(r,{class:"mt-1 text-xs",message:o(e).errors.color_id},null,8,["message"])]),l("div",Fe,[t(i,{for:"diferenciador_id",value:"Diferenciador",class:"block text-base font-medium leading-6 text-gray-900"}),t(o(x),g({id:"diferenciador_id",modelValue:o(e).diferenciador_id,"onUpdate:modelValue":s[10]||(s[10]=a=>o(e).diferenciador_id=a),class:"dark:bg-gray-900"},O.value,{onSelect:v}),null,16,["modelValue"]),t(r,{class:"mt-1 text-xs",message:o(e).errors.diferenciador_id},null,8,["message"])]),l("div",Oe,[t(i,{for:"codigo",value:"Código",readonly:"",class:"block text-base font-medium leading-6 text-gray-900"}),t(u,{id:"codigo",type:"text",modelValue:o(e).codigo,"onUpdate:modelValue":s[11]||(s[11]=a=>o(e).codigo=a),readonly:""},null,8,["modelValue"]),t(r,{class:"mt-1 text-xs",message:o(e).errors.codigo},null,8,["message"])]),l("div",De,[t(i,{for:"codigo_barra",value:"Código barra",readonly:"",class:"block text-base font-medium leading-6 text-gray-900"}),t(u,{id:"codigo_barra",type:"text",modelValue:o(e).codigo_barra,"onUpdate:modelValue":s[12]||(s[12]=a=>o(e).codigo_barra=a),autocomplete:"codigo_barra",placeholder:"Ingrese Código barra"},null,8,["modelValue"]),t(r,{class:"mt-1 text-xs",message:o(e).errors.codigo_barra},null,8,["message"])]),l("div",Ne,[t(i,{for:"stock",value:"Stock",class:"block text-base font-medium leading-6 text-gray-900"}),t(u,{id:"stock",type:"number",modelValue:o(e).stock,"onUpdate:modelValue":s[13]||(s[13]=a=>o(e).stock=a)},null,8,["modelValue"]),t(r,{class:"mt-1 text-xs",message:o(e).errors.stock},null,8,["message"])]),l("div",$e,[t(i,{for:"precio_compra",value:"Precio de compra",class:"block text-base font-medium leading-6 text-gray-900"}),t(u,{id:"precio_compra",type:"number",step:"any",modelValue:o(e).precio_compra,"onUpdate:modelValue":s[14]||(s[14]=a=>o(e).precio_compra=a)},null,8,["modelValue"]),t(r,{class:"mt-1 text-xs",message:o(e).errors.precio_compra},null,8,["message"])]),l("div",Be,[t(i,{for:"precio_venta",value:"Precio de venta",class:"block text-base font-medium leading-6 text-gray-900"}),t(u,{id:"precio_venta",type:"number",step:"any",modelValue:o(e).precio_venta,"onUpdate:modelValue":s[15]||(s[15]=a=>o(e).precio_venta=a)},null,8,["modelValue"]),t(r,{class:"mt-1 text-xs",message:o(e).errors.precio_venta},null,8,["message"]),l("div",ze,[l("div",Ke,[w(l("input",{id:"check_venta",name:"check_venta","onUpdate:modelValue":s[16]||(s[16]=a=>o(e).check_venta=a),type:"checkbox",class:"h-5 w-5 rounded border-gray-300 text-indigo-600 shadow-sm"},null,512),[[z,o(e).check_venta]]),Re]),o(e).check_venta?(m(),p("div",Ae,[t(u,{id:"precio_mayorista",modelValue:o(e).porcentaje_venta,"onUpdate:modelValue":s[17]||(s[17]=a=>o(e).porcentaje_venta=a),class:"text-end",type:"number",onKeyup:q},null,8,["modelValue"]),Le])):y("",!0),t(r,{class:"mt-1 text-xs",message:o(e).errors.porcentaje_venta},null,8,["message"])])]),l("div",Ee,[t(i,{for:"precio_mayorista",value:"Precio de Mayorista",class:"block text-base font-medium leading-6 text-gray-900"}),t(u,{id:"precio_mayorista",type:"number",step:"any",modelValue:o(e).precio_mayorista,"onUpdate:modelValue":s[18]||(s[18]=a=>o(e).precio_mayorista=a)},null,8,["modelValue"]),t(r,{class:"mt-1 text-xs",message:o(e).errors.precio_mayorista},null,8,["message"]),l("div",Te,[l("div",We,[w(l("input",{id:"check_mayorista",name:"check_mayorista","onUpdate:modelValue":s[19]||(s[19]=a=>o(e).check_mayorista=a),type:"checkbox",class:"h-5 w-5 rounded border-gray-300 text-indigo-600 shadow-sm"},null,512),[[z,o(e).check_mayorista]]),Ge]),o(e).check_mayorista?(m(),p("div",Qe,[t(u,{id:"precio_mayorista",modelValue:o(e).porcentaje_mayorista,"onUpdate:modelValue":s[20]||(s[20]=a=>o(e).porcentaje_mayorista=a),class:"text-end",type:"number",onKeyup:H},null,8,["modelValue"]),qe])):y("",!0),t(r,{class:"mt-1 text-xs",message:o(e).errors.porcentaje_mayorista},null,8,["message"])])]),l("div",He,[l("div",{class:"imagePreviewWrapper",style:K({"background-image":`url(${V.value})`})},null,4)]),l("div",Je,[t(i,{value:"Imagen 1",class:"block mb-0 text-xs font-medium leading-6 text-gray-900"}),o(e).tipo_img_1=="local"?(m(),p("div",Xe,[l("input",{onInput:T,class:"pl-4 block w-full text-xs font-bold text-gray-500 cursor-pointer file:mr-4 file:py-1 file:px-2 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-gray-300 file:text-gray-700 hover:file:bg-gray-100","aria-describedby":"file_input1_help",id:"file_input1",type:"file"},null,32),Ye,t(r,{class:"mt-1 text-xs",message:o(e).errors.imagen_1},null,8,["message"])])):y("",!0),o(e).tipo_img_1=="url"?(m(),p("div",Ze,[t(u,{modelValue:o(e).image_url_1,"onUpdate:modelValue":s[21]||(s[21]=a=>o(e).image_url_1=a),class:"text-start",type:"text",onKeyup:G},null,8,["modelValue"])])):y("",!0)]),l("div",eo,[(m(!0),p(R,null,A(D.value,a=>(m(),p("label",{key:a.name},[w(l("input",{type:"radio",class:"w-4 h-4 m-2",value:a.name,"onUpdate:modelValue":s[22]||(s[22]=n=>o(e).tipo_img_1=n)},null,8,oo),[[L,o(e).tipo_img_1]]),l("span",ao,E(a.name),1)]))),128))]),l("div",to,[l("div",{class:"imagePreviewWrapper",style:K({"background-image":`url(${S.value})`})},null,4)]),l("div",so,[t(i,{value:"Imagen 2",class:"block mb-0 text-xs font-medium leading-6 text-gray-900"}),o(e).tipo_img_2=="local"?(m(),p("div",lo,[l("input",{onInput:W,class:"pl-4 block w-full text-xs font-bold text-gray-500 cursor-pointer file:mr-4 file:py-1 file:px-2 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-gray-300 file:text-gray-700 hover:file:bg-gray-100","aria-describedby":"file_input2_help",id:"file_input2",type:"file"},null,32),ro,t(r,{class:"mt-1 text-xs",message:o(e).errors.imagen_2},null,8,["message"])])):y("",!0),o(e).tipo_img_2=="url"?(m(),p("div",io,[t(u,{modelValue:o(e).image_url_2,"onUpdate:modelValue":s[23]||(s[23]=a=>o(e).image_url_2=a),onKeyup:Q,class:"text-start",type:"text"},null,8,["modelValue"])])):y("",!0)]),l("div",no,[(m(!0),p(R,null,A(D.value,a=>(m(),p("label",{key:a.name},[w(l("input",{type:"radio",class:"w-4 h-4 m-2",value:a.name,"onUpdate:modelValue":s[24]||(s[24]=n=>o(e).tipo_img_2=n)},null,8,co),[[L,o(e).tipo_img_2]]),l("span",uo,E(a.name),1)]))),128))])]),l("div",mo,[l("button",{onClick:N,type:"button",class:"inline-block rounded bg-red-600 p-2 text-sm font-semibold text-white mr-4 mb-1 hover:bg-red-700"}," Cancelar "),t(ge,{class:ne(["inline-block rounded bg-blue-600 p-2 text-sm font-semibold text-white mr-1 mb-1 hover:bg-blue-700",{"opacity-50":o(e).processing}]),disabled:o(e).processing},{default:B(()=>[ce(" Guardar ")]),_:1},8,["class","disabled"])])],40,ye)])]),_:1},8,["show"])]))}},ho=le(po,[["__scopeId","data-v-7a0425c6"]]);export{ho as default};
