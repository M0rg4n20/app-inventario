import{_ as re,k as c,o as de,K as m,T as ne,m as p,n as _,s as l,p as s,w as $,z as ce,u as a,A as g,M as w,al as B,B as y,a8 as z,x as K,y as R,an as L,v as A,C as ue,t as me,a as pe,O as _e,P as ge,Q as xe}from"./vendorb2c7101c.js";import{_ as i}from"./InputErrorb5789600.js";import{_ as d}from"./InputLabel949fdd54.js";import{_ as fe}from"./Modal5c7d7f4d.js";import{s as x}from"./multiselect2742171c.js";import{_ as u}from"./TextInput70c275a9.js";import{_ as ve}from"./PrimaryButton2bb40203.js";import{S as be}from"./sweetalert2.all5300f0ca.js";const b=k=>(ge("data-v-f2f37630"),k=k(),xe(),k),ye=b(()=>l("i",{class:"fas fa-edit"},null,-1)),ke=[ye],he={class:"p-2"},Ve=b(()=>l("div",{class:"p-4 mb-4 rounded-t flex justify-between items-center border-b border-gray-200 dark:border-gray-600"},[l("h2",{class:"text-lg font-medium text-gray-900"}," Editar Cliente ")],-1)),Se=["onSubmit"],we={class:"px-2 grid grid-cols-12 gap-3 xl:gap-3 mt-2 mb-2"},Ue={class:"col-span-12 md:col-span-12 xl:col-span-12"},je={class:"col-span-12 md:col-span-6 xl:col-span-6 hidden"},Ce={class:"col-span-12"},Ie={class:"col-span-12 xl:col-span-6"},Me={class:"col-span-12 xl:col-span-6"},Pe={class:"col-span-12 xl:col-span-6"},Fe={class:"col-span-12 xl:col-span-6"},Oe={class:"col-span-12 xl:col-span-6"},De={class:"col-span-12 xl:col-span-6"},Ee={class:"col-span-12 xl:col-span-6"},Ne={class:"col-span-12 xl:col-span-6"},$e={class:"col-span-12 xl:col-span-6"},Be={class:"col-span-12 xl:col-span-6"},ze={class:"col-span-6 xl:col-span-3"},Ke={class:"col-span-6 xl:col-span-3"},Re={class:"col-span-6 xl:col-span-3"},Le={class:"flex flex-col"},Ae={class:"flex w-full my-2 items-center"},Te=b(()=>l("label",{for:"check_venta",class:"text-xs font-normal pl-2 dark:text-white text-gray-900"},"Utilizar porcentaje venta",-1)),We={key:0,class:"flex w-50"},Ge=b(()=>l("div",{class:"w-8 flex items-center justify-center bg-gray-50 border border-gray-300 text-gray-900 text-md font-bold p-1 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}," %",-1)),Qe={class:"col-span-6 xl:col-span-3"},qe={class:"flex flex-col"},He={class:"flex w-full my-2 items-center"},Je=b(()=>l("label",{for:"check_mayorista",class:"text-xs font-normal pl-2 text-gray-900 dark:text-white"},"Utilizar porcentaje mayorista",-1)),Xe={key:0,class:"flex w-50"},Ye=b(()=>l("div",{class:"w-8 flex items-center justify-center bg-gray-50 border border-gray-300 text-gray-900 dark:text-white text-md font-bold p-1 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}," %",-1)),Ze={class:"col-span-12 xl:col-span-2"},eo={class:"col-span-7 xl:col-span-7 my-2"},oo={key:0},ao=b(()=>l("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-300",id:"imagen_1"},"Peso máximo de la foto 2MB",-1)),to={key:1},so={class:"col-span-3 xl:col-span-3 flex items-center"},lo=["value"],io={class:"font-bold"},ro={class:"col-span-12 xl:col-span-2"},no={class:"col-span-7 xl:col-span-7 my-2"},co={key:0},uo=b(()=>l("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-300",id:"imagen_2"},"Peso máximo de la foto 2MB",-1)),mo={key:1},po={class:"col-span-3 xl:col-span-3 flex items-center"},_o=["value"],go={class:"font-bold"},xo={class:"flex justify-end pt-0"},fo={__name:"EditarModal",props:{clienteId:{type:Number}},setup(k){const T=k,D=c([{name:"local"},{name:"url"}]),S=c(!1),h=c("/images/productos/temp_producto.png"),V=c("/images/productos/temp_producto.png"),W=r=>{r.preventDefault(),e.photo_1=r.target.files[0];let t=r.target.files;if(t&&t[0]){let o=new FileReader;o.onload=n=>{h.value=n.target.result},o.readAsDataURL(t[0])}},G=r=>{r.preventDefault(),e.photo_2=r.target.files[0];let t=r.target.files;if(t&&t[0]){let o=new FileReader;o.onload=n=>{V.value=n.target.result},o.readAsDataURL(t[0])}},f=r=>{e.codigo=e.familia_id+e.subproducto_id+e.marca_id+e.peso_id+e.longitud_id+e.curva_id+e.color_id+e.diferenciador_id,e.familia_id&&v(U.value.options,e.familia_id);const t=e.subproducto_id?v(C.value.options,e.subproducto_id):"",o=e.marca_id?v(j.value.options,e.marca_id):"",n=e.peso_id?v(I.value.options,e.peso_id):"",oe=e.longitud_id?v(F.value.options,e.longitud_id):"",ae=e.curva_id?v(M.value.options,e.curva_id):"",te=e.color_id?v(P.value.options,e.color_id):"",se=e.diferenciador_id?v(O.value.options,e.diferenciador_id):"",le=[t,o,n,oe,ae,te,se].filter(ie=>ie).join(" ");e.nombre=le},v=(r,t)=>{const o=r.find(n=>n.value===t);if(o){const n=o.label.split("|");return n.length>1?n[1].trim():o.label.trim()}return""},Q=r=>{h.value=e.image_url_1},q=r=>{V.value=e.image_url_2},H=r=>{e.precio_compra>0&&(e.precio_venta=parseFloat(e.precio_compra)+parseFloat(e.precio_compra*e.porcentaje_venta/100))},J=r=>{e.precio_compra>0&&(e.precio_mayorista=parseFloat(e.precio_compra)+parseFloat(e.precio_compra*e.porcentaje_mayorista/100))};de(()=>{E.value.options=m().props.categorias,U.value.options=m().props.familias,C.value.options=m().props.subproductos,j.value.options=m().props.marcas,I.value.options=m().props.pesos,F.value.options=m().props.longitudes,M.value.options=m().props.curvas,P.value.options=m().props.colores,O.value.options=m().props.diferenciadores});const E=c({value:"",closeOnSelect:!0,placeholder:"Seleccione",searchable:!0,options:[]}),U=c({value:"",closeOnSelect:!0,placeholder:"Seleccione",searchable:!0,options:[]}),j=c({value:"",closeOnSelect:!0,placeholder:"Seleccione",searchable:!0,options:[]}),C=c({value:"",closeOnSelect:!0,placeholder:"Seleccione",searchable:!0,options:[]}),I=c({value:"",closeOnSelect:!0,placeholder:"Seleccione",searchable:!0,options:[]}),M=c({value:"",closeOnSelect:!0,placeholder:"Seleccione",searchable:!0,options:[]}),P=c({value:"",closeOnSelect:!0,placeholder:"Seleccione",searchable:!0,options:[]}),F=c({value:"",closeOnSelect:!0,placeholder:"Seleccione",searchable:!0,options:[]}),O=c({value:"",closeOnSelect:!0,placeholder:"Seleccione",searchable:!0,options:[]}),e=ne({id:"",nombre:"",categoria_id:"",descripcion:"",familia_id:"",subproducto_id:"",marca_id:"",peso_id:"",longitud_id:"",curva_id:"",color_id:"",diferenciador_id:"",codigo:"",codigo_barra:null,precio_compra:"",stock:"",precio_venta:"",precio_mayorista:"",porcentaje_mayorista:"",porcentaje_venta:"",check_mayorista:"",check_venta:"",imagen_1:"",imagen_2:"",photo_1:h.value,photo_2:V.value,tipo_img_1:"local",tipo_img_2:"local",image_url_1:"",image_url_2:""}),X=()=>{Y(T.clienteId)},Y=r=>{pe.get(route("productos.show",r)).then(t=>{S.value=!0;var o=t.data.data;e.id=o.id,e.nombre=o.nombre,e.categoria_id=o.categoria_id,e.descripcion=o.descripcion,e.familia_id=o.familia_id,e.subproducto_id=o.subproducto_id,e.marca_id=o.marca_id,e.peso_id=o.peso_id,e.curva_id=o.curva_id,e.color_id=o.color_id,e.longitud_id=o.longitud_id,e.diferenciador_id=o.diferenciador_id,e.codigo=o.codigo,e.codigo_barra=o.codigo_barra,e.stock=o.stock,e.precio_venta=o.precio_venta,e.precio_compra=o.precio_compra,e.precio_mayorista=o.precio_mayorista,e.check_venta=o.check_venta,e.check_mayorista=o.check_mayorista,e.porcentaje_mayorista=o.porcentaje_mayorista,e.porcentaje_venta=o.porcentaje_venta,h.value=m().props.base_url+o.imagen_1,V.value=m().props.base_url+o.imagen_2,e.imagen_1=o.imagen_1})},N=()=>{S.value=!1,e.reset()},Z=()=>{e.clearErrors(),e.post(route("productos.update",e.id),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{S.value=!1,ee("Producto Editado"),e.reset(),_e.get(route("productos.index"))},onFinish:()=>{},onError:()=>{}})},ee=r=>{e.reset(),be.fire({width:350,title:r,icon:"success"})};return(r,t)=>(p(),_("section",null,[l("button",{type:"button",onClick:X},ke),s(fe,{show:S.value,onClose:N},{default:$(()=>[l("div",he,[Ve,l("form",{onSubmit:ce(Z,["prevent"])},[l("div",we,[l("div",Ue,[s(d,{for:"nombre",value:"Nombre",class:"block text-base font-medium leading-6 text-gray-900"}),s(u,{id:"nombre",type:"text",modelValue:a(e).nombre,"onUpdate:modelValue":t[0]||(t[0]=o=>a(e).nombre=o),autocomplete:"nombre",placeholder:"Ingrese nombre",readonly:""},null,8,["modelValue"]),s(i,{class:"mt-1 text-xs",message:a(e).errors.nombre},null,8,["message"])]),l("div",je,[s(d,{for:"categoria_id",value:"Categoria",class:"block text-base font-medium leading-6 text-gray-900"}),s(a(x),g({id:"categoria_id",disabled:"",modelValue:a(e).categoria_id,"onUpdate:modelValue":t[1]||(t[1]=o=>a(e).categoria_id=o)},E.value),null,16,["modelValue"]),s(i,{class:"mt-1 text-xs",message:a(e).errors.categoria_id},null,8,["message"])]),l("div",Ce,[s(d,{for:"descripcion",value:"Descripción",class:"block text-base font-medium leading-6 text-gray-900"}),s(u,{id:"descripcion",type:"text",modelValue:a(e).descripcion,"onUpdate:modelValue":t[2]||(t[2]=o=>a(e).descripcion=o),autocomplete:"descripcion",placeholder:"Ingrese descripcion"},null,8,["modelValue"]),s(i,{class:"mt-1 text-xs",message:a(e).errors.descripcion},null,8,["message"])]),l("div",Ie,[s(d,{for:"familia_id",value:"Familia",class:"block text-base font-medium leading-6 text-gray-900"}),s(a(x),g({id:"familia_id",modelValue:a(e).familia_id,"onUpdate:modelValue":t[3]||(t[3]=o=>a(e).familia_id=o)},U.value,{disabled:"",onSelect:f}),null,16,["modelValue"]),s(i,{class:"mt-1 text-xs",message:a(e).errors.familia_id},null,8,["message"])]),l("div",Me,[s(d,{for:"subproducto_id",value:"Sub producto",class:"block text-base font-medium leading-6 text-gray-900"}),s(a(x),g({id:"subproducto_id",modelValue:a(e).subproducto_id,"onUpdate:modelValue":t[4]||(t[4]=o=>a(e).subproducto_id=o),disabled:""},C.value,{onSelect:f}),null,16,["modelValue"]),s(i,{class:"mt-1 text-xs",message:a(e).errors.subproducto_id},null,8,["message"])]),l("div",Pe,[s(d,{for:"marca_id",value:"Marca",class:"block text-base font-medium leading-6 text-gray-900"}),s(a(x),g({id:"marca_id",modelValue:a(e).marca_id,"onUpdate:modelValue":t[5]||(t[5]=o=>a(e).marca_id=o)},j.value,{disabled:"",onSelect:f}),null,16,["modelValue"]),s(i,{class:"mt-1 text-xs",message:a(e).errors.marca_id},null,8,["message"])]),l("div",Fe,[s(d,{for:"peso_id",value:"Peso",class:"block text-base font-medium leading-6 text-gray-900"}),s(a(x),g({id:"peso_id",modelValue:a(e).peso_id,"onUpdate:modelValue":t[6]||(t[6]=o=>a(e).peso_id=o)},I.value,{disabled:"",onSelect:f}),null,16,["modelValue"]),s(i,{class:"mt-1 text-xs",message:a(e).errors.peso_id},null,8,["message"])]),l("div",Oe,[s(d,{for:"longitud_id",value:"Longitud",class:"block text-base font-medium leading-6 text-gray-900"}),s(a(x),g({id:"longitud_id",modelValue:a(e).longitud_id,"onUpdate:modelValue":t[7]||(t[7]=o=>a(e).longitud_id=o),disabled:""},F.value,{onSelect:f}),null,16,["modelValue"]),s(i,{class:"mt-1 text-xs",message:a(e).errors.longitud_id},null,8,["message"])]),l("div",De,[s(d,{for:"curva_id",value:"Curva",class:"block text-base font-medium leading-6 text-gray-900"}),s(a(x),g({id:"curva_id",modelValue:a(e).curva_id,"onUpdate:modelValue":t[8]||(t[8]=o=>a(e).curva_id=o)},M.value,{disabled:"",onSelect:f}),null,16,["modelValue"]),s(i,{class:"mt-1 text-xs",message:a(e).errors.curva_id},null,8,["message"])]),l("div",Ee,[s(d,{for:"color_id",value:"Color",class:"block text-base font-medium leading-6 text-gray-900"}),s(a(x),g({id:"color_id",modelValue:a(e).color_id,"onUpdate:modelValue":t[9]||(t[9]=o=>a(e).color_id=o)},P.value,{disabled:"",onSelect:f}),null,16,["modelValue"]),s(i,{class:"mt-1 text-xs",message:a(e).errors.color_id},null,8,["message"])]),l("div",Ne,[s(d,{for:"diferenciador_id",value:"Diferenciador",class:"block text-base font-medium leading-6 text-gray-900"}),s(a(x),g({id:"diferenciador_id",modelValue:a(e).diferenciador_id,"onUpdate:modelValue":t[10]||(t[10]=o=>a(e).diferenciador_id=o),disabled:"",class:"dark:bg-gray-900"},O.value,{onSelect:f}),null,16,["modelValue"]),s(i,{class:"mt-1 text-xs",message:a(e).errors.diferenciador_id},null,8,["message"])]),l("div",$e,[s(d,{for:"codigo",value:"Código",readonly:"",class:"block text-base font-medium leading-6 text-gray-900"}),s(u,{id:"codigo",type:"text",modelValue:a(e).codigo,"onUpdate:modelValue":t[11]||(t[11]=o=>a(e).codigo=o),readonly:""},null,8,["modelValue"]),s(i,{class:"mt-1 text-xs",message:a(e).errors.codigo},null,8,["message"])]),l("div",Be,[s(d,{for:"codigo_barra",value:"Código barra",readonly:"",class:"block text-base font-medium leading-6 text-gray-900"}),s(u,{id:"codigo_barra",type:"text",modelValue:a(e).codigo_barra,"onUpdate:modelValue":t[12]||(t[12]=o=>a(e).codigo_barra=o),autocomplete:"codigo_barra",placeholder:"Ingrese Código barra"},null,8,["modelValue"]),s(i,{class:"mt-1 text-xs",message:a(e).errors.codigo_barra},null,8,["message"])]),l("div",ze,[s(d,{for:"stock",value:"Stock",class:"block text-base font-medium leading-6 text-gray-900"}),s(u,{id:"stock",type:"number",disabled:"",modelValue:a(e).stock,"onUpdate:modelValue":t[13]||(t[13]=o=>a(e).stock=o)},null,8,["modelValue"]),s(i,{class:"mt-1 text-xs",message:a(e).errors.stock},null,8,["message"])]),l("div",Ke,[s(d,{for:"precio_compra",value:"Precio de compra",class:"block text-base font-medium leading-6 text-gray-900"}),s(u,{id:"precio_compra",type:"number",step:"any",modelValue:a(e).precio_compra,"onUpdate:modelValue":t[14]||(t[14]=o=>a(e).precio_compra=o)},null,8,["modelValue"]),s(i,{class:"mt-1 text-xs",message:a(e).errors.precio_compra},null,8,["message"])]),l("div",Re,[s(d,{for:"precio_venta",value:"Precio de venta",class:"block text-base font-medium leading-6 text-gray-900"}),s(u,{id:"precio_venta",type:"number",step:"any",modelValue:a(e).precio_venta,"onUpdate:modelValue":t[15]||(t[15]=o=>a(e).precio_venta=o)},null,8,["modelValue"]),s(i,{class:"mt-1 text-xs",message:a(e).errors.precio_venta},null,8,["message"]),l("div",Le,[l("div",Ae,[w(l("input",{id:"check_venta",name:"check_venta","onUpdate:modelValue":t[16]||(t[16]=o=>a(e).check_venta=o),type:"checkbox",class:"h-5 w-5 rounded border-gray-300 text-indigo-600 shadow-sm"},null,512),[[B,a(e).check_venta]]),Te]),a(e).check_venta?(p(),_("div",We,[s(u,{id:"precio_mayorista",modelValue:a(e).porcentaje_venta,"onUpdate:modelValue":t[17]||(t[17]=o=>a(e).porcentaje_venta=o),class:"text-end",type:"number",onKeyup:H},null,8,["modelValue"]),Ge])):y("",!0),s(i,{class:"mt-1 text-xs",message:a(e).errors.porcentaje_venta},null,8,["message"])])]),l("div",Qe,[s(d,{for:"precio_mayorista",value:"Precio de Mayorista",class:"block text-base font-medium leading-6 text-gray-900"}),s(u,{id:"precio_mayorista",type:"number",step:"any",modelValue:a(e).precio_mayorista,"onUpdate:modelValue":t[18]||(t[18]=o=>a(e).precio_mayorista=o)},null,8,["modelValue"]),s(i,{class:"mt-1 text-xs",message:a(e).errors.precio_mayorista},null,8,["message"]),l("div",qe,[l("div",He,[w(l("input",{id:"check_mayorista",name:"check_mayorista","onUpdate:modelValue":t[19]||(t[19]=o=>a(e).check_mayorista=o),type:"checkbox",class:"h-5 w-5 rounded border-gray-300 text-indigo-600 shadow-sm"},null,512),[[B,a(e).check_mayorista]]),Je]),a(e).check_mayorista?(p(),_("div",Xe,[s(u,{id:"precio_mayorista",modelValue:a(e).porcentaje_mayorista,"onUpdate:modelValue":t[20]||(t[20]=o=>a(e).porcentaje_mayorista=o),class:"text-end",type:"number",onKeyup:J},null,8,["modelValue"]),Ye])):y("",!0),s(i,{class:"mt-1 text-xs",message:a(e).errors.porcentaje_mayorista},null,8,["message"])])]),l("div",Ze,[l("div",{class:"imagePreviewWrapper",style:z({"background-image":`url(${h.value})`})},null,4)]),l("div",eo,[s(d,{value:"Imagen 1",class:"block mb-0 text-xs font-medium leading-6 text-gray-900"}),a(e).tipo_img_1=="local"?(p(),_("div",oo,[l("input",{onInput:W,class:"pl-4 block w-full text-xs font-bold text-gray-500 cursor-pointer file:mr-4 file:py-1 file:px-2 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-gray-300 file:text-gray-700 hover:file:bg-gray-100","aria-describedby":"file_input1_help",id:"file_input1",type:"file"},null,32),ao,s(i,{class:"mt-1 text-xs",message:a(e).errors.imagen_1},null,8,["message"])])):y("",!0),a(e).tipo_img_1=="url"?(p(),_("div",to,[s(u,{modelValue:a(e).image_url_1,"onUpdate:modelValue":t[21]||(t[21]=o=>a(e).image_url_1=o),class:"text-start",type:"text",onKeyup:Q},null,8,["modelValue"])])):y("",!0)]),l("div",so,[(p(!0),_(K,null,R(D.value,o=>(p(),_("label",{key:o.name},[w(l("input",{type:"radio",class:"w-4 h-4 m-2",value:o.name,"onUpdate:modelValue":t[22]||(t[22]=n=>a(e).tipo_img_1=n)},null,8,lo),[[L,a(e).tipo_img_1]]),l("span",io,A(o.name),1)]))),128))]),l("div",ro,[l("div",{class:"imagePreviewWrapper",style:z({"background-image":`url(${V.value})`})},null,4)]),l("div",no,[s(d,{value:"Imagen 2",class:"block mb-0 text-xs font-medium leading-6 text-gray-900"}),a(e).tipo_img_2=="local"?(p(),_("div",co,[l("input",{onInput:G,class:"pl-4 block w-full text-xs font-bold text-gray-500 cursor-pointer file:mr-4 file:py-1 file:px-2 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-gray-300 file:text-gray-700 hover:file:bg-gray-100","aria-describedby":"file_input2_help",id:"file_input2",type:"file"},null,32),uo,s(i,{class:"mt-1 text-xs",message:a(e).errors.imagen_2},null,8,["message"])])):y("",!0),a(e).tipo_img_2=="url"?(p(),_("div",mo,[s(u,{modelValue:a(e).image_url_2,"onUpdate:modelValue":t[23]||(t[23]=o=>a(e).image_url_2=o),onKeyup:q,class:"text-start",type:"text"},null,8,["modelValue"])])):y("",!0)]),l("div",po,[(p(!0),_(K,null,R(D.value,o=>(p(),_("label",{key:o.name},[w(l("input",{type:"radio",class:"w-4 h-4 m-2",value:o.name,"onUpdate:modelValue":t[24]||(t[24]=n=>a(e).tipo_img_2=n)},null,8,_o),[[L,a(e).tipo_img_2]]),l("span",go,A(o.name),1)]))),128))])]),l("div",xo,[l("button",{onClick:N,type:"button",class:"inline-block rounded bg-red-600 p-2 text-sm font-semibold text-white mr-4 mb-1 hover:bg-red-700"}," Cancelar "),s(ve,{class:ue(["inline-block rounded bg-blue-600 p-2 text-sm font-semibold text-white mr-1 mb-1 hover:bg-blue-700",{"opacity-50":a(e).processing}]),disabled:a(e).processing},{default:$(()=>[me(" Guardar ")]),_:1},8,["class","disabled"])])],40,Se)])]),_:1},8,["show"])]))}},Uo=re(fo,[["__scopeId","data-v-f2f37630"]]);export{Uo as default};
