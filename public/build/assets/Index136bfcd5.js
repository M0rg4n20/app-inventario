import{k as h,K as u,G as g,I as Z,J as O,T as q,o as z,m as l,n as b,p as c,u as o,w as p,Z as A,s as e,t as x,D as G,B as _,x as J,y as K,v as r,z as R}from"./vendor9df2f612.js";import{_ as H}from"./AuthenticatedLayouta4b2ee4f.js";import{Q as U,Z as k}from"./flowbite-vue17772b29.js";import{S as v}from"./sweetalert2.all2e5f4a54.js";import W from"./CrearModal0445b4f9.js";import X from"./EditarModal1d88fcae.js";import{P as w}from"./datatables.net-vue3039c2e70.js";import{D as Y,l as ee}from"./es-ESfe29d7f2.js";import"./InputError36fdb8dd.js";import"./InputLabel7da40d8f.js";import"./Modale28fe8ea.js";import"./multiselectf73eb494.js";import"./TextInputaca9d9c1.js";import"./PrimaryButton0ecc7f29.js";import"./es.es96ee115e.js";const re={class:"ml-4 col-span-full"},te={class:"px-5 col-span-full flex justify-between items-center"},se=e("h1",{class:"text-xl font-semibold text-gray-900 sm:text-2xl dark:text-white"},"Clientes",-1),oe={class:"p-4 mb-4 bg-white col-span-12 pb-5 rounded-lg shadow-sm 2xl:col-span-12 dark:border-gray-700 sm:p-4 dark:bg-gray-800"},ae={class:"overflow-x-auto"},ce={class:"lg:inline-block min-w-full mt-4"},de={class:"overflow-hidden"},le=e("thead",{class:"text-md text-center text-gray-700 bg-gray-200/80 dark:bg-gray-700 dark:text-gray-400"},[e("tr",null,[e("th",{scope:"col",class:"border border-gray-300 dark:border-gray-500"},[e("div",{class:"flex justify-center"}," ID ")]),e("th",{scope:"col",class:"border border-gray-300 dark:border-gray-500"},[e("div",{class:"flex justify-center text-center"}," Nombre ")]),e("th",{scope:"col",class:"border border-gray-300 dark:border-gray-500"},[e("div",{class:"flex justify-center text-center"}," RFC ")]),e("th",{scope:"col",class:"border border-gray-300 dark:border-gray-500"},[e("div",{class:"flex justify-center text-center"}," Email ")]),e("th",{scope:"col",class:"border border-gray-300 dark:border-gray-500"},[e("div",{class:"flex justify-center text-center"}," Télefono ")]),e("th",{scope:"col",class:"border border-gray-300 dark:border-gray-500"},[e("div",{class:"flex justify-center text-center"}," Casa dirección ")]),e("th",{scope:"col",class:"border border-gray-300 dark:border-gray-500"},[e("div",{class:"flex justify-center text-center"}," Casa colonia ")]),e("th",{scope:"col",class:"border border-gray-300 dark:border-gray-500"},[e("div",{class:"flex justify-center text-center"}," Oficina dirección ")]),e("th",{scope:"col",class:"border border-gray-300 dark:border-gray-500"},[e("div",{class:"flex justify-center text-center"}," Oficina colonia ")]),e("th",{scope:"col",class:"border border-gray-300 dark:border-gray-500"},[e("div",{class:"flex justify-center text-center"}," Fecha nacimiento ")]),e("th",{scope:"col",class:"border border-gray-300 dark:border-gray-500"},[e("div",{class:"flex justify-center"}," Total compras ")]),e("th",{scope:"col",class:"border border-gray-300 dark:border-gray-500"},[e("div",{class:"flex justify-center"}," Última compra ")]),e("th",{scope:"col",class:"border border-gray-300 dark:border-gray-500"},[e("div",{class:"flex justify-center text-center"}," Tipo Cliente ")]),e("th",{scope:"col",class:"border border-gray-300 dark:border-gray-500"},[e("div",{class:"flex justify-center"}," Ingreso sistema ")]),e("th",{scope:"col",class:"border border-gray-300 dark:border-gray-500"},[e("div",{class:"flex justify-center"}," Acciones ")])])],-1),ne={scope:"row",class:"p-1 border-2 dark:bg-gray-800 dark:border-gray-700 font-medium text-gray-900 dark:text-white"},ie={scope:"row",class:"p-1 border-2 dark:bg-gray-800 dark:border-gray-700 font-medium text-gray-900 dark:text-white"},be={scope:"row",class:"p-1 border dark:border-gray-700"},pe={scope:"row",class:"p-1 border dark:border-gray-700"},ue={scope:"row",class:"p-1 border dark:border-gray-700"},ge={scope:"row",class:"p-1 border dark:border-gray-700"},ye={scope:"row",class:"p-1 border dark:border-gray-700"},_e={scope:"row",class:"p-1 border dark:border-gray-700"},fe={scope:"row",class:"p-1 border dark:border-gray-700"},me={scope:"row",class:"p-1 border dark:border-gray-700"},he={scope:"row",class:"p-1 border dark:border-gray-700"},xe={scope:"row",class:"p-1 border-2 dark:border-gray-700 text-center"},ke={scope:"row",class:"p-1 border-2 dark:border-gray-700 text-center"},ve={scope:"row",class:"p-1 border dark:border-gray-700"},we={scope:"row",class:"p-1 border dark:border-gray-700"},Ce={key:0,class:"inline-block rounded bg-blue-600 px-2 py-1 text-base font-semibold text-white mr-1 mb-1 hover:bg-blue-700"},je={key:1,class:"inline-block rounded bg-red-600 px-2 py-1 text-base font-semibold text-white mr-1 mb-1 hover:bg-red-700"},Be=["onClick"],Pe=e("i",{class:"fas fa-trash-alt"},null,-1),Le=[Pe],Ke={__name:"Index",setup(Te){w.use(Y);const f=h({}),n=h(""),{permissions:y}=u().props.auth,C=g(()=>u().props.clientes.data),m=g(()=>{let s=u().props.clientes.data;return n.value!==""&&(i.currentPage=1,s=f.value.filter(t=>t.nombre.toLowerCase().includes(n.value.toLowerCase())||t.rfc.toLowerCase().includes(n.value.toLowerCase())||t.email.toLowerCase().includes(n.value.toLowerCase())||t.tipo_cliente.toLowerCase().includes(n.value.toLowerCase()))),s}),i=Z({currentPage:1,perPage:10,totalPages:g(()=>Math.ceil(m.value.length/i.perPage))});O(()=>i.totalPages,()=>i.currentPage=1),g(()=>{const{currentPage:s,perPage:t}=i,a=(s-1)*t,d=a+t;return m.value.slice(a,d)});const j=q({id:""});z(()=>{f.value=u().props.clientes.data});const B=(s,t)=>{v.mixin({buttonsStyling:!0}).fire({width:350,title:"Seguro de eliminar "+t,text:"Se eliminará definitivamente",icon:"question",showCancelButton:!0,confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",cancelButtonColor:"red",confirmButtonColor:"#2563EB"}).then(d=>{d.isConfirmed&&j.delete(route("clientes.destroy",s),{preserveScroll:!0,onSuccess:()=>{P("Eliminado")}})})},P=s=>{v.fire({width:350,title:s,icon:"success"})};return(s,t)=>(l(),b("div",null,[c(o(A),{title:"Clientes"}),c(H,null,{default:p(()=>[e("div",re,[c(o(U),null,{default:p(()=>[c(o(k),{href:"/",home:""},{default:p(()=>[x(" Inicio ")]),_:1}),c(o(k),null,{default:p(()=>[x(" Clientes ")]),_:1})]),_:1})]),e("div",te,[se,o(y).includes("crear-clientes")?(l(),G(W,{key:0})):_("",!0)]),e("div",oe,[e("div",ae,[e("div",ce,[e("div",de,[c(o(w),{options:{language:o(ee),order:[[1,"asc"]]},class:"pt-3 w-full text-xs text-center text-gray-600 dark:text-gray-400"},{default:p(()=>[le,e("tbody",null,[(l(!0),b(J,null,K(C.value,({id:a,nombre:d,rfc:L,email:T,telefono:I,casa_direccion:S,casa_colonia:D,oficina_direccion:E,oficina_colonia:N,fecha_nacimiento:V,total_compras:$,ultima_compra:F,tipo_cliente:M,created_at:Q},Ie)=>(l(),b("tr",{key:a,class:"bg-white border-b text-center dark:bg-gray-800 dark:border-gray-700"},[e("th",ne,r(a),1),e("th",ie,r(d),1),e("td",be,r(L),1),e("td",pe,r(T),1),e("td",ue,r(I),1),e("td",ge,r(S),1),e("td",ye,r(D),1),e("td",_e,r(E),1),e("td",fe,r(N),1),e("td",me,r(V),1),e("td",he,r($),1),e("td",xe,r(F),1),e("td",ke,r(M),1),e("td",ve,r(Q),1),e("td",we,[o(y).includes("editar-clientes")?(l(),b("span",Ce,[c(X,{"cliente-id":a},null,8,["cliente-id"])])):_("",!0),o(y).includes("eliminar-clientes")?(l(),b("span",je,[e("button",{onClick:R(Se=>B(a,d),["prevent"])},Le,8,Be)])):_("",!0)])]))),128))])]),_:1},8,["options"])])])])])]),_:1})]))}};export{Ke as default};
